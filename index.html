<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="病了就要吃药">
<meta property="og:type" content="website">
<meta property="og:title" content="旺旺小小酥">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="旺旺小小酥">
<meta property="og:description" content="病了就要吃药">
<meta property="og:locale">
<meta property="article:author" content="zhaowang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>旺旺小小酥</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta custom-logo">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">旺旺小小酥</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">路虽远，行则至</p>
      <a>
        <img class="custom-logo-image" src="/uploads/custom-logo.jpg" alt="旺旺小小酥">
      </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/07/http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/07/http/" class="post-title-link" itemprop="url">http</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-07 21:25:43" itemprop="dateCreated datePublished" datetime="2023-03-07T21:25:43+08:00">2023-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-03-08 17:55:56" itemprop="dateModified" datetime="2023-03-08T17:55:56+08:00">2023-03-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">web前端</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%89%8D%E7%AB%AF/http/" itemprop="url" rel="index"><span itemprop="name">http</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6994629873985650696">知识点</a></p>
<h1 id="http状态吗"><a href="#http状态吗" class="headerlink" title="http状态吗"></a>http状态吗</h1><p><a href="">link</a><br>1xx （临时响应）表示临时响应并需要请求者继续执行操作的状态代码。<br>2xx  表示成功<br>3xx 表示重定向<br>4xx 请求错误<br>5xx 请求没问题，服务器发生了错误</p>
<h1 id="get-和-post区别"><a href="#get-和-post区别" class="headerlink" title="get 和 post区别"></a>get 和 post区别</h1><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/28586791">知乎</a><br>GET产生一个TCP数据包；POST产生两个TCP数据包。<br>w3c<br>GET在浏览器回退时是无害的，而POST会再次提交请求。<br>GET产生的URL地址可以被Bookmark，而POST不可以。<br>GET请求会被浏览器主动cache，而POST不会，除非手动设置。<br>GET请求只能进行url编码，而POST支持多种编码方式。<br>GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。<br>GET请求在URL中传送的参数是有长度限制的，而POST么有。<br>对参数的数据类型，GET只接受ASCII字符，而POST没有限制。<br>GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。<br>GET参数通过URL传递，POST放在Request body中。</p>
<p>他们底层都是tcp&#x2F;ip， 你要愿意get耶可以增request-body， post也可以在url上带上参数。<br>对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；<br>而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。</p>
<h1 id="http-缓存方案-zhihu"><a href="#http-缓存方案-zhihu" class="headerlink" title="http 缓存方案 zhihu"></a>http 缓存方案 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c78b5de7a889">zhihu</a></h1><p>一个网站，访问次数太多就会对服务器造成太多的压力， 为了提升性能所以要做出优化<br>http根据是否要向服务器发送请求，将缓存分为强缓存 和 对比缓存（协商缓存）</p>
<h1 id="强缓存，-直接从缓存数据库中获取资源，无需向服务器发起强求"><a href="#强缓存，-直接从缓存数据库中获取资源，无需向服务器发起强求" class="headerlink" title="强缓存， 直接从缓存数据库中获取资源，无需向服务器发起强求"></a>强缓存， 直接从缓存数据库中获取资源，无需向服务器发起强求</h1><p>客户端向缓存仓库请求数据， 如果命中缓存， 切缓存没有失效那么直接取出数据<br>http中用来判断是否命中强缓存的字段为Expires和Cache-Control，Cache-Control优先级高于Expires。</p>
<p>expires 是一个绝对时间，表示在这个时间之前的请求都是可以直接从缓存中读取，该字段时http1.0时代的产物，目前http1.1时代该字段可以忽略了<br>cache-control 是响应头中的信息<br>cache-control：  public 和 max-age&#x3D;7200，这是一个相对时间（单位：秒），这里代表资源的缓存在这个请求之后的2小时内都有效<br>强缓存的s tatus-code是200 （这里是注释）<br>强缓存时，这个注释会有两种情况：<br>from memory cache： 缓存资源在内存中，浏览器（或页面标签）关闭后内存中的缓存就会被释放，重新打开页面取不到该缓存。<br>from disk cache： 缓存资源在硬盘中，浏览器（或页面标签）关闭后硬盘中的缓存不会消失，下次进入页面还能从硬盘中获取。</p>
<h1 id="对比缓存-客户端向服务器发送请求，带上缓存对比标志，经过服务端对比客户端提供的标志，发现缓存可用，返回304状态码，然后直接向缓存仓库获取资源。"><a href="#对比缓存-客户端向服务器发送请求，带上缓存对比标志，经过服务端对比客户端提供的标志，发现缓存可用，返回304状态码，然后直接向缓存仓库获取资源。" class="headerlink" title="对比缓存 客户端向服务器发送请求，带上缓存对比标志，经过服务端对比客户端提供的标志，发现缓存可用，返回304状态码，然后直接向缓存仓库获取资源。"></a>对比缓存 客户端向服务器发送请求，带上缓存对比标志，经过服务端对比客户端提供的标志，发现缓存可用，返回304状态码，然后直接向缓存仓库获取资源。</h1><p>如何对比标志来确认是否使用缓存？这里主要涉及到两种标志：</p>
<p>Last-Modified &#x2F; If-Modified-Since<br>Etag &#x2F; If-None-Match</p>
<ol>
<li><p>Last-Modified &#x2F; If-Modified-Since<br>当浏览器第一次访问一个资源的时候，服务器会在response header中返回一个Last-Modified，代表这个资源最后的修改时间，当浏览器再次访问这个资源的时候，会在request header中带上 If-Modified-Since，值为上次请求时服务器返回的 Last-Modified 的值，然后服务器根据资源上次修改的时间确认资源在这段期间内是否更改过，如果没有，则返回304，如果有，则返回200并返回最新的资源。</p>
</li>
<li><p>Etag &#x2F; If-None-Match<br>Etag &#x2F; If-None-Match 与 Last-Modified &#x2F; If-Modified-Since 的机制类似，不同的是，Etag是通过一个校验码来对比资源是否更改过的，而不是通过资源的修改时间。当一个资源修改时，其校验码也会更改。当浏览器请求资源时，服务器会返回一个Etag字段，然后浏览器下一次请求时，会带上 If-None-Match ，值为上次服务器返回的Etag的值，服务器经过校验码的对比后决定返回200或304。</p>
</li>
<li><p>Etag 的优先级高于 Last-Modified</p>
</li>
</ol>
<h1 id="http-和-https-区别"><a href="#http-和-https-区别" class="headerlink" title="http 和 https 区别"></a>http 和 https 区别</h1><p>在互联网初期，网页只是用来做一个简单的咨讯，浏览页，大家只要输入url就可以访问，因此也不存在安全性，几乎任何信息是以明文的方式在服务器上进行传输。 随着网络发展，类似于亚马逊等购物网站的出现，用户登陆，账户密码，网络支付等功能越来越常用化，网络安全性就显得尤为重要。</p>
<ol>
<li>http ：超文本传输协议（Hypertext Transfer Protocol，http）是一个简单的请求-响应协议，它通常运行在TCP之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以ASCII形式给出；而消息内容则具有一个类似MIME的格式。这个简单模型是早期Web成功的有功之臣，因为它使开发和部署非常地直截了当。</li>
<li>https： https （Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 http 通道，在http的基础上通过传输加密和身份认证保证了传输过程的安全性。https 在http 的基础下加入SSL，https 的安全基础是 SSL，因此加密的详细内容就需要 SSL。 https 存在不同于 http 的默认端口及一个加密&#x2F;身份验证层（在 http与 TCP 之间）。这个系统提供了身份验证与加密通讯方法。它被广泛用于万维网上安全敏感的通讯，例如交易支付等方面</li>
<li>HTTP是明文传输，不安全的，HTTPS是加密传输，安全的多</li>
<li>HTTP标准端口是80，HTTPS标准端口是443</li>
<li>HTTP不用认证证书免费，HTTPS需要认证证书要钱</li>
<li>连接方式不同，HTTP三次握手，HTTPS中TLS1.2版本7次，TLS1.3版本6次</li>
<li>HTTP在OSI网络模型中是在应用层，而HTTPS的TLS是在传输层</li>
<li>HTTP是无状态的，HTTPS是有状态的</li>
</ol>
<h1 id="http1-0-x2F-http1-1-x2F-http2"><a href="#http1-0-x2F-http1-1-x2F-http2" class="headerlink" title="http1.0 &#x2F; http1.1 &#x2F; http2"></a>http1.0 &#x2F; http1.1 &#x2F; http2</h1><h2 id="http1-0"><a href="#http1-0" class="headerlink" title="http1.0"></a>http1.0</h2><p>每一个请求建立一个TCP连接，请求完成后立马断开连接。<br>这将会导致2个问题：连接无法复用。<br>阻塞： 连接无法复用会导致每次请求都经历三次握手和慢启动。三次握手在高延迟的场景下影响较明显，慢启动则对文件类大请求影响较大。会导致带宽无法被充分利用，以及后续健康请求被阻塞。客户端同时发起的请求数目是固定的，如果太多就会排队阻塞。</p>
<h2 id="http1-1"><a href="#http1-1" class="headerlink" title="http1.1"></a>http1.1</h2><ul>
<li>引入更多的请求方法类型PUT、PATCH、DELETE、OPTIONS、TRACE、CONNECT</li>
<li>引入长连接，就是TCP连接默认不关闭，可以被多个请求复用，通过请求头connection:keep-alive设置</li>
<li>引入管道连接机制，可以在同一TCP连接里，同时发送多个请求</li>
<li>强化了缓存管理和控制Cache-Control、ETag&#x2F;If-None-Match</li>
<li>支持分块响应，断点续传，利于大文件传输，能过请求头中的Range实现</li>
<li>使用了虚拟网络，在一台物理服务器上可以存在多个虚拟主机，并且共享一个IP地址、、<br>缺点： 主要是连接缓慢，服务器只能按顺序响应，如果某个请求花了很长时间，就会出现请求队头阻塞<br>虽然出了很多优化技巧：为了增加并发请求，做域名拆分、资源合并、精灵图、资源预取…等等<br>最终为了推进从协议上进行优化，Google跳出来，推出SPDY协议</li>
</ul>
<h1 id="http2-0"><a href="#http2-0" class="headerlink" title="http2.0"></a>http2.0</h1><ul>
<li>使用新的二进制协议，不再是纯文本，避免文本歧义，缩小了请求体积</li>
<li>多路复用，同域名下所有通信都是在单链接(双向数据流)完成，提高连接的复用率，在拥塞控制方面有更好的能力提升</li>
<li>使用HPACK算法将头部压缩，用哈夫曼编码建立索表，传送索引大大节约了带宽</li>
<li>允许服务端主动推送数据给客户端</li>
<li>增加了安全性，使用HTTP 2.0，要求必须至少TLS 1.2</li>
<li>使用虚拟的流传输消息，解决了应用层的队头阻塞问题</li>
</ul>
<h1 id="http1-1-和-http2-0"><a href="#http1-1-和-http2-0" class="headerlink" title="http1.1 和  http2.0"></a>http1.1 和  http2.0</h1><p>HTTP1 和 HTTP2</p>
<p>HTTP2是一个二进制协议，HTTP1是超文本协议，传输的内容都不是一样的<br>HTTP2报头压缩，可以使用HPACK进行头部压缩，HTTP1则不论什么请求都会发送<br>HTTP2服务端推送(Server push)，允许服务器预先将网页所需要的资源push到浏览器的内存当中<br>HTTP2遵循多路复用，代替同一域名下的内容，只建立一次连接，HTTP1.x不是，对域名有6~8个连接限制<br>HTTP2引入二进制数据帧和流的概念，其中帧对数据进行顺序标识，这样浏览器收到数据之后，就可以按照序列对数据进行合并，而不会出现合并后数据错乱的情况，同样是因为有了序列，服务器就可以并行的传输数据，这就是流所做的事情。HTTP2对同一域名下所有请求都是基于流的，也就是说同一域名下不管访问多少文件，只建立一次连接</p>
<h1 id="同源策略，"><a href="#同源策略，" class="headerlink" title="同源策略，"></a>同源策略，</h1><p>协议，域名，端口不一致就会触发（跨域）同源策略，是一种浏览器的安全机制</p>
<h1 id="跨域解决方法"><a href="#跨域解决方法" class="headerlink" title="跨域解决方法"></a>跨域解决方法</h1><h2 id="cors-cross-origin-resource-sharing-跨域资源共，这种方法跟同源的ajax访问没有区别，"><a href="#cors-cross-origin-resource-sharing-跨域资源共，这种方法跟同源的ajax访问没有区别，" class="headerlink" title="cors cross-origin-resource-sharing 跨域资源共，这种方法跟同源的ajax访问没有区别，"></a>cors cross-origin-resource-sharing 跨域资源共，这种方法跟同源的ajax访问没有区别，</h2><ol>
<li>在请求中增加头部自动 origin： xxxx  包含请求页面的源信息（协议、域名和端口） 服务端根据这个自动判断是否可以响应</li>
<li>如果服务器认为这个请求可以接受，就在 Access-Control-Allow-Origin 头部中回发相同的源信息（如果是公共资源，可以回发 * ）。例如：Access-Control-Allow-Origin：<a target="_blank" rel="noopener" href="http://www.laixiangran.cn/">http://www.laixiangran.cn</a></li>
<li>没有这个头部或者有这个头部但源信息不匹配，浏览器就会驳回请求。正常情况下，浏览器会处理请求。注意，请求和响应都不包含 cookie 信息。</li>
<li>如果需要包含 cookie 信息，ajax 请求需要设置 xhr 的属性 withCredentials 为 true，服务器需要设置响应头部 Access-Control-Allow-Credentials: true。</li>
</ol>
<p>有点支持所有http请求</p>
<h2 id="jsonp-动态插入script-标签，通过script-标签的src-进行跨域"><a href="#jsonp-动态插入script-标签，通过script-标签的src-进行跨域" class="headerlink" title="jsonp 动态插入script 标签，通过script 标签的src 进行跨域"></a>jsonp 动态插入script 标签，通过script 标签的src 进行跨域</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 1. 定义一个 回调函数 handleResponse 用来接收返回的数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleResponse</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 动态创建一个 script 标签，并且告诉后端回调函数名叫 handleResponse</span></span><br><span class="line"><span class="keyword">var</span> body = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;body&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">gerElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">script.<span class="property">src</span> = <span class="string">&#x27;http://www.laixiangran.cn/json?callback=handleResponse&#x27;</span>;</span><br><span class="line">body.<span class="title function_">appendChild</span>(script);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 通过 script.src 请求 `http://www.laixiangran.cn/json?callback=handleResponse`，</span></span><br><span class="line"><span class="comment">// 4. 后端能够识别这样的 URL 格式并处理该请求，然后返回 handleResponse(&#123;&quot;name&quot;: &quot;laixiangran&quot;&#125;) 给浏览器</span></span><br><span class="line"><span class="comment">// 5. 浏览器在接收到 handleResponse(&#123;&quot;name&quot;: &quot;laixiangran&quot;&#125;) 之后立即执行 ，也就是执行 handleResponse 方法，获得后端返回的数据，这样就完成一次跨域请求了。</span></span><br></pre></td></tr></table></figure>
<p>优点， 简单方便， 没有兼容性的问题<br>缺点 只支持get请求</p>
<h2 id="postMessage-html5新引入的特性，用它可以向window对象发送消息"><a href="#postMessage-html5新引入的特性，用它可以向window对象发送消息" class="headerlink" title="postMessage html5新引入的特性，用它可以向window对象发送消息"></a>postMessage html5新引入的特性，用它可以向window对象发送消息</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  &lt;iframe src=<span class="string">&quot;http://laixiangran.cn/b.html&quot;</span> id=<span class="string">&quot;myIframe&quot;</span> onload=<span class="string">&quot;test()&quot;</span> style=<span class="string">&quot;display: none;&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// 1. iframe载入 &quot;http://laixiangran.cn/b.html 页面后会执行该函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 2. 获取 http://laixiangran.cn/b.html 页面的 window 对象，</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 然后通过 postMessage 向 http://laixiangran.cn/b.html 页面发送消息</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> iframe = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myIframe&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> win = iframe.<span class="property">contentWindow</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        win.<span class="title function_">postMessage</span>(<span class="string">&#x27;我是来自 http://www.laixiangran.cn/a.html 页面的消息&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  &lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="comment">// 注册 message 事件用来接收消息</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onmessage</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        e = e || event; <span class="comment">// 获取事件对象</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">data</span>); <span class="comment">// 通过 data 属性得到发送来的消息</span></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="cookie-x2F-session-x2F-localstorage-x2F-sessionstorage-x2F-indexdb详解"><a href="#cookie-x2F-session-x2F-localstorage-x2F-sessionstorage-x2F-indexdb详解" class="headerlink" title="cookie &#x2F; session &#x2F; localstorage &#x2F; sessionstorage&#x2F; indexdb详解"></a>cookie &#x2F; session &#x2F; localstorage &#x2F; sessionstorage&#x2F; indexdb详解</h1><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7137247442038161444">juejin</a></p>
<h2 id="indexdb"><a href="#indexdb" class="headerlink" title="indexdb"></a>indexdb</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> db;</span><br><span class="line"><span class="keyword">var</span> request = <span class="variable language_">window</span>.<span class="property">indexedDB</span>.<span class="title function_">open</span>(dbName, version);</span><br><span class="line">request.<span class="property">onsuccess</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    db = request.<span class="property">result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">request.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 在onupgradeneeded事件内操作</span></span><br><span class="line">request.<span class="property">onupgradeneeded</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    db = event.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">    <span class="keyword">var</span> objectStore = db.<span class="title function_">createObjectStore</span>(<span class="string">&#x27;item&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">keyPath</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">        <span class="attr">autoIncrement</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建索引通过id搜索：</span></span><br><span class="line"><span class="comment">     * objectStore.createIndex(indexName, keyPath, objectParameters)</span></span><br><span class="line"><span class="comment">     *    indexName: 创建的索引名，可为空</span></span><br><span class="line"><span class="comment">     *    keyPath: 索引使用的关键路径，可为空</span></span><br><span class="line"><span class="comment">     *    objectParameters: 可选参数，unique标识该字段是否唯一，不能重复 </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    objectStore.<span class="title function_">createIndex</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;id&#x27;</span>, &#123; <span class="attr">unique</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 添加信息到数据库</span></span><br><span class="line">    objectStore.<span class="title function_">add</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;nnn&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;aa&#x27;</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在onupgradeneeded事件外操作</span></span><br><span class="line"><span class="comment">// 新建事务</span></span><br><span class="line"><span class="keyword">var</span> transaction = db.<span class="title function_">transaction</span>([<span class="string">&#x27;item&#x27;</span>], <span class="string">&#x27;readwrite&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建存储对象</span></span><br><span class="line"><span class="keyword">var</span> objectStore = transaction.<span class="title function_">objectStore</span>(<span class="string">&#x27;item&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加数据</span></span><br><span class="line">objectStore.<span class="title function_">add</span>(&#123; <span class="attr">name</span>:<span class="string">&#x27;nnn&#x27;</span>, <span class="attr">age</span>:<span class="string">&#x27;aa&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 在onupgradeneeded事件内操作</span></span><br><span class="line">request.<span class="property">onupgradeneeded</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    db = event.<span class="property">target</span>.<span class="property">result</span>;</span><br><span class="line">    <span class="keyword">var</span> objectStore = db.<span class="title function_">createObjectStore</span>(<span class="string">&#x27;item&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">keyPath</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">        <span class="attr">autoIncrement</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建索引通过id搜索：</span></span><br><span class="line"><span class="comment">     * objectStore.createIndex(indexName, keyPath, objectParameters)</span></span><br><span class="line"><span class="comment">     *    indexName: 创建的索引名，可为空</span></span><br><span class="line"><span class="comment">     *    keyPath: 索引使用的关键路径，可为空</span></span><br><span class="line"><span class="comment">     *    objectParameters: 可选参数，unique标识该字段是否唯一，不能重复 </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    objectStore.<span class="title function_">createIndex</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;id&#x27;</span>, &#123; <span class="attr">unique</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 添加信息到数据库</span></span><br><span class="line">    objectStore.<span class="title function_">add</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;nnn&#x27;</span>, <span class="attr">age</span>: <span class="string">&#x27;aa&#x27;</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在onupgradeneeded事件外操作</span></span><br><span class="line"><span class="comment">// 新建事务</span></span><br><span class="line"><span class="keyword">var</span> transaction = db.<span class="title function_">transaction</span>([<span class="string">&#x27;item&#x27;</span>], <span class="string">&#x27;readwrite&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建存储对象</span></span><br><span class="line"><span class="keyword">var</span> objectStore = transaction.<span class="title function_">objectStore</span>(<span class="string">&#x27;item&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加数据</span></span><br><span class="line">objectStore.<span class="title function_">add</span>(&#123; <span class="attr">name</span>:<span class="string">&#x27;nnn&#x27;</span>, <span class="attr">age</span>:<span class="string">&#x27;aa&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/06/html/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/06/html/" class="post-title-link" itemprop="url">html</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-06 21:38:31" itemprop="dateCreated datePublished" datetime="2023-03-06T21:38:31+08:00">2023-03-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-03-07 21:23:54" itemprop="dateModified" datetime="2023-03-07T21:23:54+08:00">2023-03-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">web前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="H5新增标签及其语义化理解"><a href="#H5新增标签及其语义化理解" class="headerlink" title="H5新增标签及其语义化理解"></a>H5新增标签及其语义化理解</h1><p>article、 section、 aside、 header、 nav、 main、 footer。。<br>audio， video， canvas标签<br>新增input type属性扩展 data， eamial， url， search， range， month，color， number</p>
<ol>
<li>利于搜索引擎优化， seo（Search Engine Optimization） 搜索引擎可以更准确地识别页面内容，从而提高搜索结果的质量</li>
<li>更好的阅读性和可维护性，让html代码更加容易阅读和理解，也方便开发人员进行维护</li>
<li>访问性，方便视障用户更好的访问页面内容</li>
<li>兼容性，方便多端设备（屏幕阅读器， 盲人阅读器， 移动设备）和浏览器访问</li>
</ol>
<h1 id="canvas-和-svg区别"><a href="#canvas-和-svg区别" class="headerlink" title="canvas 和 svg区别"></a>canvas 和 svg区别</h1><ol>
<li>canvas 是h5新增的标签 绘制出来的是一个标量图，可以用作大型游戏的画布， 其绘制图形通常是用js来实现的。并且可以引入jpg或者png，一旦绘制完成，浏览器不会进行关注，如果某个位置发生改变那么整个场景都要重新绘制。</li>
<li>svg 比较久远，绘制的是一个矢量图，所以经常用于地图， 基于xml，意味svg每个dom元素都能获取到，并且添加事件处理器。绘制完成后，svg的对象属性发生变化，浏览器会自动重现图形。</li>
</ol>
<h1 id="Dom事件模型"><a href="#Dom事件模型" class="headerlink" title="Dom事件模型"></a>Dom事件模型</h1><p>DOM全称是Document Object Model，即文档对象模型。DOM是W3C的标准，定义了访问 HTML 和 XML 文档的标准</p>
<ol>
<li>dom事件<br>当用户对dom对象进行各种操作时，做出的响应，可称之为事件。比如鼠标点击，键盘按下，拖拽等操作发生时，用js去处理（响应）这类操作的结果。</li>
<li>事件流 dom结构是一个树形结构，当事件发生时，事件会在节点之间进行传播，所有经过的节点都是接受到这个事件</li>
<li>事件模型 ie的冒泡模型（bubble）和 dom的标准事件处理模型 冒泡，捕获<br>冒泡型事件处理模型在事件发生时，首先在最精确的元素上触发，然后向上传播，直到根节点。反映到DOM树上就是事件从叶子节点传播到根节点。</li>
</ol>
<p>标准的事件处理模型分为三个阶段：</p>
<ol>
<li><p>父元素中所有的捕捉型事件（如果有）自上而下地执行</p>
</li>
<li><p>目标元素的冒泡型事件（如果有）</p>
</li>
<li><p>父元素中所有的冒泡型事件（如果有）自下而上地执行</p>
</li>
<li><p>注册事件</p>
</li>
</ol>
<ul>
<li>传统方式<br>这种方式是无论在IE还是Firefox等其他浏览器上都可以成功运行的通用方式。这便是它最大的优势了，而且在Event处理函数内部的this变量无一例外的都只想被绑定的DOM元素，这使得Js程序员可以大大利用this关键字做很多事情。</li>
</ul>
<p>　至于它的缺点也很明显，就是传统方式只支持Bubbling，而不支持Capturing，并且一次只能绑定一个事件处理器在DOM元素上，无法实现多Handler绑定。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;…&#125;</span><br><span class="line">obj.<span class="property">onmouseover</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;…&#125;</span><br><span class="line">.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;…&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>w3c<br>addEventListener带有三个参数，第一个参数是事件类型，就是我们熟知的那些事件名字去掉前面的’on’，第二个参数是处理函数，可以直接给函数字面量或者函数名，第三个参数是boolean值，表示事件是否支持Capturing。</li>
</ul>
<p>W3C的事件模型优点是Bubbling和Capturing都支持，并且可以在一个DOM元素上绑定多个事件处理器，各自并不会冲突。并且在处理函数内部，this关键字仍然可以使用只想被绑定的DOM元素。另外function参数列表的第一个位置(不管是否显示调用)，都永远是event对象的引用。</p>
<p>至于它的缺点，很不幸的就只有在市场份额最大的IE浏览器下不可使用这一点。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(‘load’,<span class="keyword">function</span>(<span class="params"></span>)&#123;…&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">addEventListener</span>(‘keypress’,<span class="keyword">function</span>&#123;…&#125;,<span class="literal">false</span>);</span><br><span class="line">obj.<span class="title function_">addEventListener</span>(‘mouseover’,<span class="variable constant_">MV</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MV</span>(<span class="params"></span>)&#123;…&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ie event module<br>它跟W3C的区别是没有第三个参数，而且第一个表示事件类型的参数也必须把’on’给加上。这种方式的优点就是能绑定多个事件处理函数在同一个DOM元素上。</li>
</ul>
<p>　　至于它的缺点，为什么如今在实际开发中很少见呢？首先IE浏览器本身只支持Bubbling不支持Capturing；而且在事件处理的function内部this关键字也无法使用，因为this永远都只想window object这个全局对象。要想得到event对象必须通过window.event方式，最后一点，在别的浏览器中，它显然是无法工作的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">attachEvent</span>(‘onload’,<span class="keyword">function</span>(<span class="params"></span>)&#123;…&#125;);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">attachEvent</span>(‘onkeypress’,myKeyHandler);</span><br></pre></td></tr></table></figure>
<h1 id="阻止冒泡和默认事件"><a href="#阻止冒泡和默认事件" class="headerlink" title="阻止冒泡和默认事件"></a>阻止冒泡和默认事件</h1><ol>
<li>阻止冒泡<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ie </span></span><br><span class="line">e.<span class="property">cancelbubble</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">// w3c</span></span><br><span class="line">e.<span class="title function_">stopPropagation</span>()</span><br></pre></td></tr></table></figure></li>
<li>阻止默认事件<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a链接的跳转， 表单提交， 右键呼出菜单选项都是默认事件</span></span><br><span class="line"><span class="keyword">if</span>(e.<span class="property">preventDefault</span>)&#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>(); <span class="comment">//w3c</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    event.<span class="property">returnValue</span> = <span class="literal">false</span>; <span class="comment">// ie9以下</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h1><ol>
<li><p>为什么要用事件委托<br>当页面中很多表格或列表需要添加事件时，如果逐个添加那就太麻烦了，但是使用事件委托就能极大的减轻我们的工作量，同时也能提高页面的性能。</p>
</li>
<li><p>事件委托实现原理<br>事件委托是利用事件的冒泡原理来实现的，大致可以分为三个步骤：</p>
</li>
</ol>
<ul>
<li>确定要添加事件元素的父级元素；</li>
<li>给父元素定义事件，监听子元素的冒泡事件；</li>
<li>使用 event.target 来定位触发事件冒泡的子元素。<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 传统的方法</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> the_ul = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;list&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> the_li = the_ul.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">  <span class="keyword">for</span>( <span class="keyword">var</span> i=<span class="number">0</span>; i &lt; the_li.<span class="property">length</span>; i++ )&#123;</span><br><span class="line">      the_li[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">innerHTML</span>)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 事件委托的方法</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> the_ul = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;list&#x27;</span>);</span><br><span class="line">    the_ul.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">      <span class="comment">// e.target 就是实际点击的那个li</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">innerHTML</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="3">
<li>总结事件</li>
</ol>
<ol>
<li>减小内存消耗<br>使用事件委托可以大量节省内存，减少事件的定义，通过上面的示例可以看出，要为 ul 标签下的所有 li 标签添加点击事件，如果分别为每个 li 标签绑定事件，不仅写起来比较繁琐，而且对内存的消耗也非常大。而使用事件委托的方式将点击事件绑定到 ul 标签上，就可以实现监听所有 li 标签，简洁、高效。</li>
<li>动态绑定事件<br>在网页中，有时我们需要动态增加或移除页面中的元素，比如上面示例中动态的在 ul 标签中添加 li 标签，如果不使用事件委托，则需要手动为新增的元素绑定事件，同时为删除的元素解绑事件。而使用事件委托就没有这么麻烦了，无论是增加还是减少 ul 标签中的 li 标签，即不需要再为新增的元素绑定事件，也不需要为删除的元素解绑事件。</li>
</ol>
<ol start="3">
<li>要使用事件委托，需要保证事件能够发生冒泡，适合使用事件委托的事件有 click、mousedown、mouseup、keydown、keyup、keypress 等。需要注意的是，虽然 mouseover 和 mouseout 事件也会发生事件冒泡，但处理起来非常麻烦，所以不推荐在 mouseover 和 mouseout 事件中使用事件委托。对于不会发生事件冒泡的事件（例如 load、unload、abort、focus、blur 等），则无法使用事件委托。</li>
</ol>
<h1 id="拖拽"><a href="#拖拽" class="headerlink" title="拖拽"></a>拖拽</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">被拖拽的元素需要添加 draggable 属性</span><br><span class="line"></span><br><span class="line">拖拽的元素事件</span><br><span class="line">1. dragestart 按下鼠标并进行移动时出发</span><br><span class="line">2. drag 在拖动的过程中持续触发</span><br><span class="line">3. dragend 在移动后，松开鼠标的一瞬间触发，或者按下esc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;a&#x27;</span> <span class="attr">draggable</span>&gt;</span>拖拽的元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;b&#x27;</span>&gt;</span>接受拖拽的元素/目标元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  目标元素，如果元素合法即可称为目标元素</span><br><span class="line">  接受拖拽的元素素需要在 dragover 和 dragenter阻止默认事件</span><br><span class="line">  如果某个元素同时设置了dragover和drop的监听，那么必须阻止dragover的默认行为，否则drop将不会被触发</span><br><span class="line"></span><br><span class="line">目标元素的事件</span><br><span class="line">1. dragenter 进入目标元素时触发</span><br><span class="line">2. dragover 进入目标元素后并进行移动触发</span><br><span class="line">3. drop 当被拖动的元素在目标区域被放下时触发此事件</span><br><span class="line">4. dragleave 拖拽元素离开目标区域时触发</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> app = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;a&#x27;</span>)[<span class="number">0</span>]; <span class="comment">// 拖拽元素</span></span><br><span class="line"><span class="keyword">let</span> target = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;b&#x27;</span>)[<span class="number">0</span>]; <span class="comment">// 目标元素</span></span><br><span class="line">app.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;dragstart&quot;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">    <span class="comment">// 添加datatransfer设置标志位biji 值时 id</span></span><br><span class="line">    e.<span class="property">dataTransfer</span>.<span class="title function_">setData</span>(<span class="string">&#x27;biji&#x27;</span>, <span class="variable language_">this</span>.<span class="property">id</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drag&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;drag&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragend&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragend&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标元素，接受拖拽的元素</span></span><br><span class="line">target.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragenter&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragenter&#x27;</span>)</span><br><span class="line">    e.<span class="title function_">stopPropagation</span>()</span><br><span class="line">    e.<span class="title function_">preventDefault</span>()</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">target.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragover&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragover&#x27;</span>)</span><br><span class="line">    e?.<span class="title function_">stopPropagation</span>() </span><br><span class="line">    e?.<span class="title function_">preventDefault</span>() <span class="comment">// 要想drop生效比较在dragover事件中阻止默认事件</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">target.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drop&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> _uid = e.<span class="property">dataTransfer</span>.<span class="title function_">getData</span>(<span class="string">&#x27;biji&#x27;</span>);</span><br><span class="line">    <span class="comment">// 将拖拽元素添加为目标元素的子元素</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(_uid));</span><br><span class="line">&#125;)</span><br><span class="line">target.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragleave&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragleave&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="元素js完成拖拽"><a href="#元素js完成拖拽" class="headerlink" title="元素js完成拖拽"></a>元素js完成拖拽</h2><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904094285430798">图文小解clientX, scrollX及offsetX的区别
</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> dragDiv = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.a&#x27;</span>) <span class="comment">// 拖拽元素</span></span><br><span class="line">	<span class="comment">// 绑定鼠标按下对象</span></span><br><span class="line">	dragDiv.<span class="property">onmousedown</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 获取鼠标在div上按下的位置</span></span><br><span class="line">    <span class="keyword">var</span> e = e || <span class="variable language_">window</span>.<span class="property">event</span>;  <span class="comment">//接收事件对象</span></span><br><span class="line">	<span class="comment">// 获取鼠标在当前事件源的位置</span></span><br><span class="line">    <span class="keyword">var</span> x1 = e.<span class="property">offsetX</span> <span class="comment">// 鼠标按下时相对带有定位盒子的 x</span></span><br><span class="line">    <span class="keyword">var</span> y1 = e.<span class="property">offsetY</span> <span class="comment">// 鼠标按下时相对带有定位盒子的 y</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 绑定移动事件</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// 获取鼠标在浏览器中的位置 - 每个事件都有自己独特的事件对象</span></span><br><span class="line">        <span class="keyword">var</span> e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">        <span class="keyword">var</span> x2 = e.<span class="property">clientX</span> <span class="comment">// client 鼠标相对当前可是区域的 x</span></span><br><span class="line">        <span class="keyword">var</span> y2 = e.<span class="property">clientY</span> <span class="comment">// client 鼠标相对当前可是区域的 y</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 计算left和top</span></span><br><span class="line">        <span class="keyword">var</span> l = x2 - x1 <span class="comment">// 计算出盒子距离可视区域的left</span></span><br><span class="line">        <span class="keyword">var</span> t = y2 - y1 <span class="comment">// 计算出盒子距离可视区域的top</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 设置不能超出左上角和右上角</span></span><br><span class="line">        <span class="keyword">if</span>(l &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            l = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(t &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            t = <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">          <span class="comment">// 设置left和top的最大值 不能超过事件源本身</span></span><br><span class="line">          <span class="comment">// clientHeight 可视区域的高度， </span></span><br><span class="line">          <span class="comment">// offsetHeight 盒子的高度</span></span><br><span class="line">          <span class="comment">// top 值如果超出了这个高度 就按照这个高度计算</span></span><br><span class="line">        <span class="keyword">if</span>(t &gt; <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> - box.<span class="property">offsetHeight</span>) &#123;</span><br><span class="line">            t = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> - box.<span class="property">offsetHeight</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(l &gt; <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> - box.<span class="property">offsetWidth</span>) &#123;</span><br><span class="line">            l = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> - box.<span class="property">offsetWidth</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置div的left和top</span></span><br><span class="line">        box.<span class="property">style</span>.<span class="property">left</span> = l + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">        box.<span class="property">style</span>.<span class="property">top</span> = t + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 拖拽行为一定要记得解绑mousemove事件</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onmouseup</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">onmousemove</span> = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/03/issue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/issue/" class="post-title-link" itemprop="url">issue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-03 02:25:48" itemprop="dateCreated datePublished" datetime="2023-03-03T02:25:48+08:00">2023-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-03-06 23:59:57" itemprop="dateModified" datetime="2023-03-06T23:59:57+08:00">2023-03-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/issue/" itemprop="url" rel="index"><span itemprop="name">issue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="当我们项目中添加了个多个git仓库。当我们在当前仓库push的时候，它不会提交你clone的内部仓库。"><a href="#当我们项目中添加了个多个git仓库。当我们在当前仓库push的时候，它不会提交你clone的内部仓库。" class="headerlink" title="当我们项目中添加了个多个git仓库。当我们在当前仓库push的时候，它不会提交你clone的内部仓库。"></a>当我们项目中添加了个多个git仓库。当我们在当前仓库push的时候，它不会提交你clone的内部仓库。</h1><p>就是外部仓库无法 track 一个嵌套仓库，外部仓库所有的 add，commit，push 都与嵌套仓库没有任何关系。</p>
<h2 id="首先你需要移除这个仓库"><a href="#首先你需要移除这个仓库" class="headerlink" title="首先你需要移除这个仓库"></a>首先你需要移除这个仓库</h2><p>git rm -f –cahche themes&#x2F;next  &#x2F;&#x2F; clone 的地址是 themes&#x2F;next</p>
<h2 id="1-强制将next仓库嵌套进你当前的仓库"><a href="#1-强制将next仓库嵌套进你当前的仓库" class="headerlink" title="1. 强制将next仓库嵌套进你当前的仓库"></a>1. 强制将next仓库嵌套进你当前的仓库</h2><p>删除掉themes&#x2F;next 中 .git 文件，这样next就是一个普通的文件，不和任何仓库有关系。 在外部文件可以直接push</p>
<h2 id="2-使用-git-submodule-add-地址-子模块目录"><a href="#2-使用-git-submodule-add-地址-子模块目录" class="headerlink" title="2. 使用 git submodule add 地址  子模块目录"></a>2. 使用 git submodule add 地址  子模块目录</h2><p>但是子模块的代码不由我们控制，也就是源仓库修改，我们这边受到牵连<br>命令行中输入 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule add https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>
<p>执行完成后，会在站点根目录下生成 .gitmodules 文件，内容如下：</p>

[submodule "themes/next"]
    path = themes/next
    url = https://github.com/theme-next/hexo-theme-next

<p>配置文件保存了项目 URL 与已经拉取的本地目录之间的映射，如果有多个子模块，该文件中就会有多条记录。要重点注意的是，该文件应像 .gitignore 文件一样受到（通过）版本控制，和该项目的其他部分一同被拉取推送。有了映射关系，克隆该项目的人就知道去哪获得子模块了</p>
<h2 id="fork别人的仓库到自己的仓库中去"><a href="#fork别人的仓库到自己的仓库中去" class="headerlink" title="fork别人的仓库到自己的仓库中去"></a>fork别人的仓库到自己的仓库中去</h2><p>重复第二部的命令行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule add 自己仓库的地址 themes/next</span><br></pre></td></tr></table></figure>

[submodule "themes/next"]
    path = themes/next
    url = https://github.com/izhaowang/hexo-theme-next
    ignore = all 


<ul>
<li>all：子模块永远不会被视为已修改（但仍将显示在状态输出中并在提交时提交）。</li>
<li>dirty：将忽略对子模块工作树的所有更改，仅考虑子模块的HEAD与其在超级项目中的记录状态之间的已提交差异。</li>
<li>untracked：只有子模块中未跟踪的文件才会被忽略。将显示对跟踪文件的提交的差异和修改。</li>
<li>none：默认选项，不会忽略对子模块的修改，显示所有已提交的差异以及对已跟踪和未跟踪文件的修</li>
</ul>
<h2 id="去修改子模块的git-地址"><a href="#去修改子模块的git-地址" class="headerlink" title="去修改子模块的git 地址"></a>去修改子模块的git 地址</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 在.gitmoudles中修改新的url地址</span><br><span class="line">2. 在themes/next目录下 命令输入 git submodule sync --recursive 即可</span><br></pre></td></tr></table></figure>

<h1 id="关于设置markdown的代码片段后不生效问题"><a href="#关于设置markdown的代码片段后不生效问题" class="headerlink" title="关于设置markdown的代码片段后不生效问题"></a>关于设置markdown的代码片段后不生效问题</h1><p>&#x2F;&#x2F; 在vscode的setting.json中进行如下配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;[markdown]&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;editor.quickSuggestions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;other&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">        <span class="string">&quot;comments&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">        <span class="string">&quot;strings&quot;</span>: <span class="string">&quot;on&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/03/mogoDB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/mogoDB/" class="post-title-link" itemprop="url">mogoDB</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-03 00:11:11" itemprop="dateCreated datePublished" datetime="2023-03-03T00:11:11+08:00">2023-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-03-06 23:12:54" itemprop="dateModified" datetime="2023-03-06T23:12:54+08:00">2023-03-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">web前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="数据库："><a href="#数据库：" class="headerlink" title="数据库："></a>数据库：</h1><p>存储数据的仓库， 将数据进行分门别类的存储， 它本身是一个软件， 但是可以通过api 去操作它<br>数据库软件 mysql， mongDB、 oracle<br>mongoDB api 使用js语法；  mysql &#x3D;》 php语言<br>node.js 可以操作 mysql</p>
<h1 id="安装mongoDB-和-可视化软件-mongoDBcompass；"><a href="#安装mongoDB-和-可视化软件-mongoDBcompass；" class="headerlink" title="安装mongoDB 和 可视化软件 mongoDBcompass；"></a>安装mongoDB 和 可视化软件 mongoDBcompass；</h1><h1 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h1><table>
<thead>
<tr>
<th>术语</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>dataBase</td>
<td>数据仓库，mongoDB可以创建多个数据仓库</td>
</tr>
<tr>
<td>collection</td>
<td>集合， 表示一组数据的集合；类似于js中的数组</td>
</tr>
<tr>
<td>document</td>
<td>文档， 表示具体的一条数据，类似于js中的对象</td>
</tr>
<tr>
<td>field</td>
<td>字段， 文档中的属性名称，类似于js中对象的属性</td>
</tr>
</tbody></table>
<p><img src="https://images.gitee.com/uploads/images/2021/1111/113223_17be9e73_6525038.png" alt="数据库和集合" title="屏幕截图.png"></p>
<p><img src="https://images.gitee.com/uploads/images/2021/1111/113355_5ca7bf7a_6525038.png" alt="整个列表就是文档， 每一条数据就是字段" title="屏幕截图.png"></p>
<h1 id="node-js-操作数据库；"><a href="#node-js-操作数据库；" class="headerlink" title="node.js 操作数据库；"></a>node.js 操作数据库；</h1><p>操作数据需要 借助第三方包 ： Mongoose<br>可以借助这个包进行数据库链接 和 其他操作</p>
<ol>
<li>首先再磁盘G中的node文件夹中建立 dataBase 文件夹</li>
<li>然后用powershell 进入改文件夹下<br><img src="https://images.gitee.com/uploads/images/2021/1111/113919_638870ab_6525038.png" alt="输入图片说明" title="屏幕截图.png"></li>
<li>执行 npm install mongoose</li>
<li>安装第三方包 mongoose 完成</li>
<li>启动mongoDB服务， 就是打开数据库<br>net start mongodb 启动<br>net stop mongodb<br><img src="https://images.gitee.com/uploads/images/2021/1111/114304_bbc2664e_6525038.png" alt="输入图片说明" title="屏幕截图.png"></li>
<li>用mongoose 链接数据库<br> 创建01.js文件；<br>01.js中<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 引入 mongoose</span><br><span class="line">const mongoose = require(&quot;mongoose&quot;);</span><br><span class="line">// mongoose.connect(&quot;mongodb/数据库地址/数据库名称&quot;)</span><br><span class="line">mongoose.connect(&#x27;mongodb://localhost/playground&#x27;)</span><br><span class="line">.then(</span><br><span class="line">    () =&gt; &#123; console.log(&#x27;链接成功&#x27;)&#125;</span><br><span class="line">)</span><br><span class="line">.catch(err =&gt; console.log(&quot;数据库连接失败&quot;))</span><br></pre></td></tr></table></figure>
 *** 再mongodb中不需要显示的创建数据库， 你可直接使用数据库， 当这个数据不存在时，它会自动帮你创建一个数据库 ***</li>
</ol>
<h1 id="数据库中-增、-删、-改、-查"><a href="#数据库中-增、-删、-改、-查" class="headerlink" title="数据库中 增、 删、 改、 查"></a>数据库中 增、 删、 改、 查</h1><ol>
<li><p>创建集合。 并为集合设置集合规则<br>然后才能插入文档<br>1.1 首先你要对创建的集合设定规则，<br>1.2 然后才去创建集合 mongoose.Schema 构造函数创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//  设定集合规则</span><br><span class="line"> const courseSchema = new mongoose.Schema(&#123;</span><br><span class="line">     name: String,</span><br><span class="line">     author: String,</span><br><span class="line">     isPublished: Boolean</span><br><span class="line"> &#125;)</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">// 创建集合并应用规则 第一个参数表示集合名称 Courses再集合里面会自动加s， 第二个参数表示为这个集合应用哪个规则</span><br><span class="line">const Course = mongoose.model(&#x27;Course&#x27;, courseSchema); // Course</span><br></pre></td></tr></table></figure></li>
<li><p>插入数据（文档），<br> 2.1 创建集合实例 上面的Course  就是一个构造函数<br> 2.2 调用实例下的 save 方法将数据保存到数据库中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    // 创建集合实例-- 创建文档</span><br><span class="line">const course = new Course(&#123;</span><br><span class="line">    name: &#x27;node.js实战&#x27;,</span><br><span class="line">    author: &#x27;cc&#x27;,</span><br><span class="line">    isPublished: true</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 将文档插入到数据库</span><br><span class="line">course.save()</span><br></pre></td></tr></table></figure>
<p><img src="https://images.gitee.com/uploads/images/2021/1111/151722_69fefab0_6525038.png" alt="输入图片说明" title="屏幕截图.png"></p>
</li>
<li><p>插入数据（文档）另一种方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Course.create(&#123;</span><br><span class="line">    name: &#x27;javascript&#x27;,</span><br><span class="line">    author: &#x27;cc&#x27;,</span><br><span class="line">    isPublished: true</span><br><span class="line">&#125;, (err, result) =&gt; &#123;console.log(err); console.log(result)&#125;);</span><br><span class="line"></span><br><span class="line">// 数据库操作都是异步的， 所以你也可以使用 promise的方式去进行结果的处理</span><br><span class="line">Course.create(&#123;</span><br><span class="line">    name: &#x27;javascript&#x27;,</span><br><span class="line">    author: &#x27;cc&#x27;,</span><br><span class="line">    isPublished: true</span><br><span class="line">&#125;)</span><br><span class="line">    .then(doc =&gt; console.log(doc))</span><br><span class="line">    .catch(e =&gt; console.log(e))</span><br></pre></td></tr></table></figure>
</li>
<li><p>向数据库中导入数据<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44517301/article/details/114823073">参考连接</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 将现成的数据插入到数据库中 通过命令行工具 mongoimport</span><br><span class="line">mongoimport -d 数据库名称 -c 集合名称 --file 要导入的数据文件</span><br><span class="line"></span><br><span class="line">// 1. 首先你需要将mongoimport 添加到系统环境变量中去 然后才能再命令行中使用 mongoimport</span><br><span class="line"></span><br><span class="line">// 2. 建立一个json文件， 命名为user.json</span><br><span class="line"></span><br><span class="line">// 3. 确定已经将环境变量path 添加了 mongoimport</span><br><span class="line"></span><br><span class="line">// 4. 再命令行中使用命令 mongoimport -d playground -c users --file user.json </span><br></pre></td></tr></table></figure>
</li>
<li><p>在数据库的集合中查询文档</p>
</li>
</ol>
<h2 id="find-方法-注意：-find-方法返回的永远是一个数组，-哪怕只有一条数据，-也是一个数组；-如果返回的数据不存在那么-返回空数组"><a href="#find-方法-注意：-find-方法返回的永远是一个数组，-哪怕只有一条数据，-也是一个数组；-如果返回的数据不存在那么-返回空数组" class="headerlink" title="find 方法 *** 注意： find 方法返回的永远是一个数组， 哪怕只有一条数据， 也是一个数组； 如果返回的数据不存在那么 返回空数组 ***"></a>find 方法 *** 注意： find 方法返回的永远是一个数组， 哪怕只有一条数据， 也是一个数组； 如果返回的数据不存在那么 返回空数组 ***</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const mongoose = require(&quot;mongoose&quot;); // 引入 mongoose</span><br><span class="line"></span><br><span class="line">mongoose.connect(&#x27;mongodb://localhost/playground&#x27;) // 连接数据库</span><br><span class="line">    .then(() =&gt; console.log(&#x27;链接chengg&#x27;))</span><br><span class="line">    .catch(err =&gt; console.log(err));</span><br><span class="line"></span><br><span class="line">// 设定集合规则</span><br><span class="line">const courseSchema = new mongoose.Schema(&#123;</span><br><span class="line">    name: String,</span><br><span class="line">    author: String,</span><br><span class="line">    isPublished: Boolean</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 创建集合构造函数</span><br><span class="line">const Course = mongoose.model(&#x27;Course&#x27;, courseSchema);</span><br><span class="line"></span><br><span class="line">// 利用集合的构造函数下的 find方法 find() 里面没有参数会查询到所有文档数据</span><br><span class="line">Course.find().then(result =&gt; console.log(result))</span><br><span class="line"></span><br><span class="line">// 查询某个指定id 的文档数据</span><br><span class="line"></span><br><span class="line">Course.find(&#123;_id: &#x27;618cc3216e019fb68cb4959c&#x27;&#125;).then(result =&gt; console.log(result));</span><br><span class="line">*** 注意： find 方法返回的永远是一个数组， 哪怕只有一条数据， 也是一个数组； 如果返回的数据不存在那么 返回空数组 ***</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="用findOne-查找，-该方法返回一条-数据；-默认返回集合中第一条文档"><a href="#用findOne-查找，-该方法返回一条-数据；-默认返回集合中第一条文档" class="headerlink" title="用findOne 查找， 该方法返回一条 数据； 默认返回集合中第一条文档"></a>用findOne 查找， 该方法返回一条 数据； 默认返回集合中第一条文档</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Course.findOne().then(res =&gt; console.log(res)) // 默认返回第一条文档</span><br><span class="line"></span><br><span class="line">// 条件查找 查找 name 是javascript 的数据</span><br><span class="line">Course.findOne(&#123;name: &#x27;javascript&#x27;&#125;).then(res =&gt; console.log(res));</span><br></pre></td></tr></table></figure>

<h2 id="条件查找-如：-年龄大于-多少-年龄小于多少"><a href="#条件查找-如：-年龄大于-多少-年龄小于多少" class="headerlink" title="条件查找 如： 年龄大于 多少 年龄小于多少"></a>条件查找 如： 年龄大于 多少 年龄小于多少</h2><pre><code>User.find(&#123;age: &#123;$gt:0, $lt:20&#125;&#125;)  gt=== great than  lt === less than
find 接受一个对象， age 属性值也是一个对象 &#123;$gt:0, $lt:20&#125;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User.find(&#123;age: &#123;$gt:0, $lt:20&#125;&#125;).then(res =&gt; console.log(res));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="查询爱好包含足球的-使用-in-‘敲代码’，-‘打豆豆’-；"><a href="#查询爱好包含足球的-使用-in-‘敲代码’，-‘打豆豆’-；" class="headerlink" title="查询爱好包含足球的, 使用{$in: [‘敲代码’， ‘打豆豆’]}；"></a>查询爱好包含足球的, 使用{$in: [‘敲代码’， ‘打豆豆’]}；</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.find(&#123;bobbies: &#123;$in: [&#x27;敲代码&#x27;, &#x27;打豆豆&#x27;]&#125;&#125;).then(res =&gt; console.log(res));</span><br></pre></td></tr></table></figure>

<h2 id="查询出固定的字段，-比如数据只包含-name；find方法后面链式调用select-方法"><a href="#查询出固定的字段，-比如数据只包含-name；find方法后面链式调用select-方法" class="headerlink" title="查询出固定的字段， 比如数据只包含 name；find方法后面链式调用select 方法"></a>查询出固定的字段， 比如数据只包含 name；find方法后面链式调用select 方法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User.find().select(&quot;name&quot;).then(res =&gt; console.log(res));</span><br></pre></td></tr></table></figure>
<p>如图只有名字 没有age 和 hobbies 字段<br><img src="https://images.gitee.com/uploads/images/2021/1112/134044_f57d6895_6525038.png" alt="输入图片说明" title="屏幕截图.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 如果你不需要_id 那么你只需要在_id 前使用-</span><br><span class="line">User.find().select(&quot;-name -_id age&quot;).then(res =&gt; console.log(res));</span><br></pre></td></tr></table></figure>

<h2 id="对查询出来的数据进行排序，-年龄从小到大排列-或者从大到小降序（-age）排列"><a href="#对查询出来的数据进行排序，-年龄从小到大排列-或者从大到小降序（-age）排列" class="headerlink" title="对查询出来的数据进行排序， 年龄从小到大排列 或者从大到小降序（-age）排列"></a>对查询出来的数据进行排序， 年龄从小到大排列 或者从大到小降序（-age）排列</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// sort 从小到大升序 排列</span><br><span class="line">User.find().sort(&quot;age&quot;).then(res =&gt; console.log(res));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// sort 从大到小降序 排列</span><br><span class="line">User.find().sort(&quot;-age&quot;).then(res =&gt; console.log(res));</span><br></pre></td></tr></table></figure>

<h2 id="skip-limit-讲解-分页功能可以用到"><a href="#skip-limit-讲解-分页功能可以用到" class="headerlink" title="skip limit 讲解 分页功能可以用到"></a>skip limit 讲解 分页功能可以用到</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// skip(2) 查询出来的数据 跳过前两个文档</span><br><span class="line"></span><br><span class="line">// limit(2) 不管结果有多少条数据 我只显示两条数据</span><br><span class="line">User.find().skip(2).limit(2).then(res =&gt; console.log(res));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> // findOneAndDelete() 删除单个 方法里面的参数表示的是 条件 ， 如果匹配到多条文档 也只会删除第一条数据</span><br><span class="line">  // findOneAndDelete 方法返回 删除的那个数据</span><br><span class="line"> User.findOneAndDelete(&#123;age: 5&#125;).then(res =&gt; console.log(res))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 删除多条数据  如果条件写 空对象&#123;&#125;； 那么他会删除整个集合；</span><br><span class="line">  // deleteMany 方法返回一个对象 &#123; deletedCount: 2 &#125; deletedCount 代表删除了几条数据；</span><br><span class="line"> User.deleteMany(&#123;&#125;).then(res =&gt; console.log(res)) </span><br></pre></td></tr></table></figure>

<h1 id="跟新文档"><a href="#跟新文档" class="headerlink" title="跟新文档"></a>跟新文档</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// updateOne(&#123;查询条件&#125;， &#123;要修改的值&#125;) 接受两个参数</span><br><span class="line">User.updateOne(&#123;age: 5&#125;, ).then(res =&gt; console.log(res))</span><br><span class="line"> // 返回值 &#123;</span><br><span class="line">   acknowledged: true,</span><br><span class="line">   modifiedCount: 1,</span><br><span class="line">   upsertedId: null,</span><br><span class="line">   upsertedCount: 0,</span><br><span class="line">   matchedCount: 1</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> // updataMany 一次更新多个文档；</span><br><span class="line"> updataMany(&#123;查询条件&#125;， &#123;要修改的值&#125;) 接受两个参数</span><br><span class="line"></span><br><span class="line"> User.updateMany(&#123;&#125;, &#123;age: 40&#125;).then(res =&gt; console.log(res));</span><br><span class="line"> // 将所有的数据的 age 变为40</span><br><span class="line"> // 返回值 &#123;</span><br><span class="line">   acknowledged: true,</span><br><span class="line">   modifiedCount: 2,</span><br><span class="line">   upsertedId: null,</span><br><span class="line">   upsertedCount: 0,</span><br><span class="line">   matchedCount: 3</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h1 id="mongoose-验证"><a href="#mongoose-验证" class="headerlink" title="mongoose 验证"></a>mongoose 验证</h1><p>在创建集合规则时， 可以设置当前字段的验证规则， 验证失败就插入失败</p>
<ol>
<li>required: true 表示该字段必传</li>
<li>maxlength 字符串最大长度</li>
<li>minlenght 字符串最小长度</li>
<li>trim 插入时是否去除字符串前后空格</li>
<li>min 数值最小2</li>
<li>max 数值</li>
<li>default 默认值</li>
<li>enum: [“javascript”, “c”, “php”] &#x2F;&#x2F; 表示当前字段可以填入 的值</li>
<li>validate: { &#x2F;&#x2F; 自定义的函数<br>validator: v &#x3D;&gt; { v &amp;&amp; v.length &gt; 4},<br>message: ‘传入的值不符合验证规则’ &#x2F;&#x2F; 自定义错误信息<br>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const userSchema = new  mongoose.Schema(&#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">        type: String,</span><br><span class="line">        required: [&#x27;true&#x27;, &#x27;请传入文章标题&#x27;] // 第二个参数表示 报错信息</span><br><span class="line">        maxlength: 2, // 最大长度</span><br><span class="line">        minlength: [0, &#x27;name 长度不能小于0&#x27;]</span><br><span class="line">        tirm: true //去除前后空格</span><br><span class="line">    &#125;,</span><br><span class="line">    age: &#123;</span><br><span class="line">        type: Number,</span><br><span class="line">        min:10,</span><br><span class="line">        max: 90</span><br><span class="line">    &#125;,</span><br><span class="line">    hobbies: [String],</span><br><span class="line">    date: &#123;</span><br><span class="line">        type: Date // 日期</span><br><span class="line">        default: Date.now // 默认当前时间</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">// 创建一个集合构造函数</span><br><span class="line">const User = mongoose.model(&#x27;user&#x27;, userSchema);</span><br><span class="line">User.create(&#123;name: &#x27;wanggoudaner&#x27;&#125;).then(res =&gt; console.log(res))</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="集合关联"><a href="#集合关联" class="headerlink" title="集合关联"></a>集合关联</h1><p>通常情况下， 不同的集合之间是有关系的； 例如文章信息和用户信息存储在不同的集合中； 但文章是某个用户发表的。 要查询文章所有的信息也包括了了作者的年龄，名字， 爱好等（用户信息）； 此时就需要用到集合关联。<br><img src="https://images.gitee.com/uploads/images/2021/1115/101619_b4348fc8_6525038.png" alt="输入图片说明" title="屏幕截图.png"><br>在文章集合中 的author字段 中 和用户集合的 _id 进行关联<br>***用popolate 进行关联</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户集合</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;User&#x27;</span>, <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: &#123;<span class="attr">type</span>: <span class="title class_">String</span>&#125;</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文章集合</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Post</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;Post&#x27;</span>, <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;<span class="attr">type</span>: <span class="title class_">String</span>&#125;,</span><br><span class="line">    <span class="comment">// 使用ID将文章集合和作者集合进行关联</span></span><br><span class="line">    <span class="attr">author</span>: &#123;<span class="attr">type</span>: mongoose.<span class="property">Schema</span>.<span class="property">Types</span>.<span class="property">ObjectId</span>, <span class="attr">ref</span>: <span class="string">&#x27;user&#x27;</span>&#125;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入字段 这里author 的id 是 user里面的 _id 值</span></span><br><span class="line"><span class="title class_">Post</span>.<span class="title function_">create</span>(&#123;<span class="attr">title</span>: <span class="string">&#x27;kuangren&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;618e04e5e4328b7a4c2ccad3&#x27;</span>&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 联合查询 author 字段关联的集合</span></span><br><span class="line"><span class="title class_">Post</span>.<span class="title function_">find</span>()</span><br><span class="line">    .<span class="title function_">populate</span>(<span class="string">&#x27;author&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">err, result</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result));</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/03/websever/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/03/websever/" class="post-title-link" itemprop="url">websever</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-03-03 00:10:48 / Modified: 01:03:18" itemprop="dateCreated datePublished" datetime="2023-03-03T00:10:48+08:00">2023-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">web前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="模版字符串"><a href="#模版字符串" class="headerlink" title="模版字符串"></a>模版字符串</h1><p>解决 搭建网站服务器，实现增删改查 这节中 因为大量字符串拼接过于繁琐，而且容易出错；</p>
<p>模板引擎是第三方模块；   让开发者已更加友好的方式拼接字符串； 更加容易维护</p>
<h1 id="art-template-模板引擎"><a href="#art-template-模板引擎" class="headerlink" title="art-template 模板引擎"></a>art-template 模板引擎</h1><ol>
<li>使用 npm install art-template 命令进行下载</li>
<li>使用const template &#x3D; require(‘art-template’); 引入模板引擎</li>
<li>告诉模板引擎 要拼接的数据和模板在哪  const html &#x3D; template(‘模板路径’， 数据)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art&#x27;</span>);</span><br><span class="line"><span class="comment">// 这里的后缀名.art 是固定的写法，这是模板引擎规定的； 但是里面还是写的html语法</span></span><br><span class="line"><span class="keyword">const</span> html = <span class="title function_">template</span>(<span class="string">&#x27;./views/index.art&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>，</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">    &#125;     </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// views/index.art 模板代码</span></span><br><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123;data.name&#125;&#125; // data就是 template方法的第二个参数</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123;data.age&#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h1><p>art-template 支持两种模板语法： 标准语法和原始语法。</p>
<ul>
<li>标准语法 可读性强</li>
<li>原始语法 逻辑性强</li>
</ul>
<h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">标准语法 &#123;&#123; <span class="variable constant_">XXX</span> &#125;&#125;</span><br><span class="line">原始语法 &lt;%= 数据 %&gt;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 标准语法</span></span><br><span class="line">    &lt;h2&gt;&#123;&#123;value&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;a? b: c&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;a + b &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 原始语法</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&lt;%= value %&gt;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&lt;%= a ? b: c %&gt;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&lt;%= a + b %&gt;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">    &#123;% endraw %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="原文数据"><a href="#原文数据" class="headerlink" title="原文数据"></a>原文数据</h1><p>如果数据是HTML标签， 默认模板引擎不会解析标签， 回将其转义后输出。</p>

+ 标准语法： {{@ 数据 }}
+ 原始语法： <%- 数据 %>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 标准语法</span></span><br><span class="line">        &lt;span&gt;</span><br><span class="line">            &#123;&#123;data.<span class="property">name</span>&#125;&#125; <span class="comment">// data就是 template方法的第二个参数</span></span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;&#123;data.age&#125;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;@ data.content &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//原始语法</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &lt;%= data.name %&gt; // data就是 template方法的第二个参数</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &lt;%= data.age %&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &lt;%= 1+1 %&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span> &lt;%- data.content %&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><p>在模板中可以根据条件条件来决定显示哪块HTML代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 标准语法</span></span><br><span class="line">    &#123;&#123;<span class="keyword">if</span> 条件&#125;&#125; ... &#123;&#123;/<span class="keyword">if</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;<span class="keyword">if</span> v1&#125;&#125;...&#123;&#123;elese <span class="keyword">if</span> v2&#125;&#125; ... &#123;&#123;/<span class="keyword">if</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;span&gt;</span><br><span class="line">            &#123;&#123;<span class="keyword">if</span> data.<span class="property">age</span> &gt; <span class="number">20</span>&#125;&#125;</span><br><span class="line">                我已经老了</span><br><span class="line">            &#123;&#123;<span class="keyword">else</span> <span class="keyword">if</span> data.<span class="property">age</span> &lt;= <span class="number">20</span>&#125;&#125;</span><br><span class="line">                我还很年轻</span><br><span class="line">            &#123;&#123; <span class="keyword">else</span>&#125;&#125;</span><br><span class="line">                年龄不符合要求</span><br><span class="line">            &#123;&#123;/<span class="keyword">if</span>&#125;&#125;</span><br><span class="line">     &lt;/span&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 原始语法</span></span><br><span class="line">    &lt;% <span class="keyword">if</span> (value) &#123; %&gt; ...... &lt;% &#125; %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (v1) &#123; %&gt; ...... &lt;% &#125;  <span class="keyword">else</span> <span class="keyword">if</span> (v2) &#123; %&gt;  ...... &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;% <span class="keyword">if</span>(data.<span class="property">age</span> &gt; <span class="number">20</span>) &#123; %&gt;</span><br><span class="line">            我是vn</span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">        &lt;% <span class="keyword">if</span>(data.<span class="property">age</span> &lt;= <span class="number">20</span>) &#123;%&gt;</span><br><span class="line">            我是女枪</span><br><span class="line">        &lt;% &#125;  <span class="keyword">else</span> <span class="keyword">if</span> (data.<span class="property">age</span> &gt; <span class="number">20</span>) &#123; %&gt; </span><br><span class="line">            我是女警</span><br><span class="line">        &lt;% &#125; <span class="keyword">else</span>  &#123;%&gt;</span><br><span class="line">            年龄不符合要求 </span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line">    &#123;% endraw %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="循环语法"><a href="#循环语法" class="headerlink" title="循环语法"></a>循环语法</h1>
+ 标准语法 {{each 数据}} {{/each}}
+ 原始语法 <% for() { %> <% } %>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 标准语法</span></span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &#123;&#123;each users&#125;&#125;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">                <span class="comment">// 这里的$value 相当于个每个循环想。相当于forEach中的item</span></span><br><span class="line">                &#123;&#123;$value.<span class="property">name</span>&#125;&#125;</span><br><span class="line">                &#123;&#123;$value.<span class="property">age</span>&#125;&#125;</span><br><span class="line">                &#123;&#123;$value.<span class="property">sex</span>&#125;&#125;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 原始语法</span></span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;% <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; users.<span class="property">length</span>; i++) &#123; %&gt;</span><br><span class="line">                <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &lt;%= users[i].name %&gt;</span></span><br><span class="line"><span class="language-xml">                    &lt;%= users[i].age %&gt;</span></span><br><span class="line"><span class="language-xml">                    &lt;%= users[i].sex %&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>

<h1 id="子模版"><a href="#子模版" class="headerlink" title="子模版"></a>子模版</h1><p>使用子模版可以将网站的公共区块（头部， 底部）抽离到单独的文件中。 抽离出的文件叫做子模版</p>

+ 标准语法 {{include '子模板路径'}}
+ 原始语法 <% include('子模版路径')%>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">    <span class="comment">// 标准语法</span></span><br><span class="line">    &#123;&#123; include <span class="string">&#x27;./header.art&#x27;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">// 原始语法</span></span><br><span class="line">   &lt;% <span class="title function_">include</span>(<span class="string">&#x27;./header.art&#x27;</span>) %&gt;</span><br><span class="line">    &#123;% endraw %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="模板的继承"><a href="#模板的继承" class="headerlink" title="模板的继承"></a>模板的继承</h1><p>模板继承可以将网站的HTML骨架抽离到单独的文件中， 其他页面模板可以继承 骨架文件;<br>HTML骨架 html 标签 body header标签； 这些不能用子模版语法生效； 所以需要继承</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 抽离出模板骨架</span></span><br><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    // 用block 去创建一个插槽</span><br><span class="line">    &#123;&#123;block &#x27;header&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &#123;&#123;block &#x27;content&#x27;&#125;&#125; &#123;&#123;/block&#125;&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> // 在其他文件中 继承，并填充这个骨架</span><br><span class="line"> &#123;&#123; extend &#x27;./layout.atr&#x27; &#125;&#125;</span><br><span class="line"> &#123;&#123; block &#x27;head&#x27;&#125;&#125; &lt;link rel=&quot;stylesheet&quot; href=&quot;custom.css&quot;&gt; &#123;&#123;/block&#125;&#125;</span><br><span class="line"> &#123;&#123; block &#x27;content&#x27; &#125;&#125; &lt;div&gt;我是填充内容&lt;/div&gt; &#123;&#123; /block &#125;&#125;</span><br></pre></td></tr></table></figure>


<h1 id="模板配置"><a href="#模板配置" class="headerlink" title="模板配置"></a>模板配置</h1><ol>
<li><p>想模板中导入变量 template.defaults.imports.变量名 &#x3D; 变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="keyword">const</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>); </span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在模板中导入 cc变量名是 字符串&#x27;heel&#x27;</span></span><br><span class="line">template.<span class="property">defaults</span>.<span class="property">imports</span>.<span class="property">cc</span> = <span class="string">&#x27;heel&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> html = <span class="title function_">template</span>(path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;views&#x27;</span>, <span class="string">&#x27;index.art&#x27;</span>), &#123;</span><br><span class="line">    <span class="attr">users</span>: [&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">        <span class="attr">sex</span>: <span class="string">&#x27;nan&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">22</span>,</span><br><span class="line">        <span class="attr">sex</span>: <span class="string">&#x27;nan&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;mali&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">24</span>,</span><br><span class="line">        <span class="attr">sex</span>: <span class="string">&#x27;nv&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//  在index.art 中使用 cc变量</span></span><br><span class="line"></span><br><span class="line">&lt;h1&gt;</span><br><span class="line">    &#123;&#123;cc&#125;&#125;</span><br><span class="line">&lt;/h1&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>全局配置模板的根目录， 和设置axios 的 defaultBaseURL 差不多</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置模板的根目录</span></span><br><span class="line">template.<span class="property">defaults</span>.<span class="property">root</span> = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;views&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里template 的第一个参数直接写要使用模板的文件名即可</span></span><br><span class="line"><span class="keyword">const</span> html = <span class="title function_">template</span>(<span class="string">&#x27;index.art&#x27;</span>, 数据)</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置模板默认后缀 template.defaults.extname &#x3D; “.art”;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置模板默认后缀 </span></span><br><span class="line">template.<span class="property">defaults</span>.<span class="property">extname</span> = <span class="string">&quot;.art&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置模板的根目录</span></span><br><span class="line">template.<span class="property">defaults</span>.<span class="property">root</span> = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;views&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里由于已经设置了根目录和默认后缀， 那么只需要写index即可不需要 写成 index.art</span></span><br><span class="line"><span class="keyword">const</span> html = <span class="title function_">template</span>(<span class="string">&#x27;index&#x27;</span>, 数据)</span><br></pre></td></tr></table></figure>
<p>*** 查看 4ce8adf 提交记录 ***<br>&#x2F;&#x2F; 搭建网站服务器, 实现增删改查 实现客户端和服务器的通信,<br>&#x2F;&#x2F; 连接数据库, 创建用户集合, 向集合中插入文档,<br>&#x2F;&#x2F; 当用户访问&#x2F;list时, 将所有用户信息查询出来<br>&#x2F;&#x2F; 将用户信息和表格HTML进行拼接并将拼接结果响应回客户端<br>&#x2F;&#x2F; 当用户访问&#x2F;add时, 呈现表单页面, 并实现添加用户信息功能</p>
<p> &#x2F;&#x2F; 1. 增加页面路由 呈现页面<br> &#x2F;&#x2F; 点击修改时 根据点击的id 将id传递到当前页面<br> &#x2F;&#x2F; 从数据库中查询当前用户信息, 将用户信息展示到页面<br> &#x2F;&#x2F; 2. 实现用户修改功能<br> &#x2F;&#x2F; 1. 指定表单的体骄傲地址以及请求方式<br> &#x2F;&#x2F; 2. 接受客户端传递过来的修改信息 找到用户， 将用户信息改为最新的信息</p>
</li>
</ol>
<p>&#x2F;&#x2F; 当用户访问&#x2F;modify时, 呈现修改页面, 并实现修改用户信息功能<br>&#x2F;&#x2F; 当用户访问&#x2F;delete时, 实现用户删除功能</p>
<p>&#x2F;&#x2F; ****<br>&#x2F;&#x2F; 用模板引擎解决字符串拼接的问题<br>&#x2F;&#x2F; ****</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> queryString = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./model/index&#x27;</span>); <span class="comment">// 引入数据库连接</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = <span class="built_in">require</span>(<span class="string">&#x27;./model/user&#x27;</span>); <span class="comment">// 引入用户构造函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建服务器</span></span><br><span class="line"><span class="keyword">const</span> app = http.<span class="title function_">createServer</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为服务器对象添加请求事件</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;request&#x27;</span>, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 请求方式</span></span><br><span class="line">    <span class="keyword">const</span> method = req.<span class="property">method</span>;</span><br><span class="line">    <span class="comment">// console.log(req)</span></span><br><span class="line">    <span class="keyword">const</span> &#123;pathname, query&#125; = url.<span class="title function_">parse</span>(req.<span class="property">url</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (pathname === <span class="string">&#x27;/list&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// 查找数据库</span></span><br><span class="line">            <span class="keyword">let</span> users = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">find</span>()</span><br><span class="line">            <span class="comment">// 如是访问地址时list, 那么呈现列表页面</span></span><br><span class="line">            <span class="keyword">let</span> list = <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">                &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;head&gt;</span></span><br><span class="line"><span class="string">                    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">                &lt;/head&gt;</span></span><br><span class="line"><span class="string">                &lt;body&gt;</span></span><br><span class="line"><span class="string">                    </span></span><br><span class="line"><span class="string">            `</span>;</span><br><span class="line">            users.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                list += <span class="string">`</span></span><br><span class="line"><span class="string">                    &lt;h1&gt;</span></span><br><span class="line"><span class="string">                        我是<span class="subst">$&#123;item.name&#125;</span>, 我今年<span class="subst">$&#123;item.age&#125;</span>了,</span></span><br><span class="line"><span class="string">                        我的email是<span class="subst">$&#123;item.email&#125;</span>;</span></span><br><span class="line"><span class="string">                        我的爱好</span></span><br><span class="line"><span class="string">                `</span>;</span><br><span class="line">                item.<span class="property">hobbies</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                    list += <span class="string">`<span class="subst">$&#123;item&#125;</span>,`</span></span><br><span class="line">                &#125;)</span><br><span class="line">                list += <span class="string">`</span></span><br><span class="line"><span class="string">                    &lt;a href=&quot;&quot; &gt;删除&lt;/a&gt;</span></span><br><span class="line"><span class="string">                    &lt;a href=&quot;/modify?id=<span class="subst">$&#123;item._id&#125;</span>&quot; &gt;修改&lt;/a&gt;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">                &lt;/h1&gt;&lt;hr/&gt;`</span></span><br><span class="line">            &#125;)</span><br><span class="line">            list += <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;/body&gt;</span></span><br><span class="line"><span class="string">            &lt;/html&gt;</span></span><br><span class="line"><span class="string">            `</span></span><br><span class="line">            res.<span class="title function_">end</span>(list)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&quot;/add&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> list = <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">            &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;head&gt;</span></span><br><span class="line"><span class="string">                &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">            &lt;/head&gt;</span></span><br><span class="line"><span class="string">            &lt;body&gt;</span></span><br><span class="line"><span class="string">                &lt;h1&gt;</span></span><br><span class="line"><span class="string">                    我是html</span></span><br><span class="line"><span class="string">                &lt;/h1&gt;</span></span><br><span class="line"><span class="string">                &lt;button&gt;</span></span><br><span class="line"><span class="string">                    添加用户</span></span><br><span class="line"><span class="string">                &lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;form method=&quot;post&quot; action=&quot;/add&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;名字&lt;/label&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;年龄&lt;/label&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;number&quot; name=&quot;age&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;邮箱&lt;/label&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;爱好&lt;/label&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;checkbox&quot; name=&quot;hobbies&quot; id=&quot;&quot; value=&quot;足球&quot;&gt;足球</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;checkbox&quot; name=&quot;hobbies&quot; id=&quot;&quot; value=&quot;睡觉&quot;&gt;睡觉</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;checkbox&quot; name=&quot;hobbies&quot; id=&quot;&quot; value=&quot;吃饭&quot;&gt;吃饭</span></span><br><span class="line"><span class="string">                    &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;/from&gt;</span></span><br><span class="line"><span class="string">            &lt;/body&gt;</span></span><br><span class="line"><span class="string">            &lt;/html&gt;</span></span><br><span class="line"><span class="string">            `</span>;</span><br><span class="line">            res.<span class="title function_">end</span>(list)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/modify&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// ****</span></span><br><span class="line">            <span class="comment">// query 时url.parse(req.url, true) 第二个参数传true 返回一个对象可以得到id</span></span><br><span class="line">            <span class="comment">// ****</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(query.<span class="property">id</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 在数据库中拿到数据</span></span><br><span class="line">            <span class="keyword">let</span> user = <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">_id</span>: query.<span class="property">id</span>&#125;);</span><br><span class="line">            <span class="keyword">let</span> hobbies = [<span class="string">&quot;足球&quot;</span>, <span class="string">&quot;吃饭&quot;</span>, <span class="string">&quot;睡觉&quot;</span>];</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(user)</span><br><span class="line">            <span class="keyword">let</span> modify = <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">            &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;head&gt;</span></span><br><span class="line"><span class="string">                &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">            &lt;/head&gt;</span></span><br><span class="line"><span class="string">            &lt;body&gt;</span></span><br><span class="line"><span class="string">                &lt;h1&gt;</span></span><br><span class="line"><span class="string">                    我是html</span></span><br><span class="line"><span class="string">                &lt;/h1&gt;</span></span><br><span class="line"><span class="string">                &lt;button&gt;</span></span><br><span class="line"><span class="string">                    修改用户</span></span><br><span class="line"><span class="string">                &lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;form method=&quot;post&quot; action=&quot;/modify?id=<span class="subst">$&#123;user._id&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;名字&lt;/label&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;<span class="subst">$&#123;user.name&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;年龄&lt;/label&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;number&quot; name=&quot;age&quot; value=&quot;<span class="subst">$&#123;user.age&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;邮箱&lt;/label&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=&quot;email&quot; name=&quot;email&quot; value=&quot;<span class="subst">$&#123;user.email&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;label for=&quot;&quot;&gt;爱好&lt;/label&gt;</span></span><br><span class="line"><span class="string">                   </span></span><br><span class="line"><span class="string">                   </span></span><br><span class="line"><span class="string">            `</span>;</span><br><span class="line">            <span class="comment">// 用所有爱好去循环 user对象；</span></span><br><span class="line">            <span class="comment">// 如果包含了 那么就添加 checked 属性</span></span><br><span class="line">            hobbies.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> isHobby = user.<span class="property">hobbies</span>.<span class="title function_">includes</span>(item);</span><br><span class="line">                <span class="keyword">if</span> (isHobby) &#123;</span><br><span class="line">                    modify += <span class="string">`&lt;input type=&quot;checkbox&quot; name=&quot;hobbies&quot; id=&quot;&quot; value=&quot;<span class="subst">$&#123;item&#125;</span>&quot; checked&gt;<span class="subst">$&#123;item&#125;</span>`</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    modify += <span class="string">`&lt;input type=&quot;checkbox&quot; name=&quot;hobbies&quot; id=&quot;&quot; value=&quot;<span class="subst">$&#123;item&#125;</span>&quot; &gt;<span class="subst">$&#123;item&#125;</span>`</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            modify += <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;button type=&quot;submit&quot;&gt;修改用户&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/from&gt;</span></span><br><span class="line"><span class="string">            &lt;/body&gt;</span></span><br><span class="line"><span class="string">            &lt;/html&gt;</span></span><br><span class="line"><span class="string">            `</span></span><br><span class="line">            res.<span class="title function_">end</span>(modify)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(pathname === <span class="string">&#x27;/add&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>);</span><br><span class="line">            <span class="keyword">let</span> formData = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="comment">// 接受post参数</span></span><br><span class="line">            req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">                formData += params</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// post参数接受完毕</span></span><br><span class="line">            req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(formData)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(queryString.<span class="title function_">parse</span>(formData));</span><br><span class="line">                <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">create</span>(queryString.<span class="title function_">parse</span>(formData));</span><br><span class="line">                <span class="comment">// **** </span></span><br><span class="line">                <span class="comment">// 添加成功重定向到 /list 地址</span></span><br><span class="line">                <span class="comment">// 301 表示重定向</span></span><br><span class="line">                <span class="comment">// ****</span></span><br><span class="line">                res.<span class="title function_">writeHead</span>(<span class="number">301</span>, &#123;</span><br><span class="line">                    <span class="attr">location</span>: <span class="string">&#x27;/list&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pathname === <span class="string">&#x27;/modify&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> formData = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="comment">// 接受post参数</span></span><br><span class="line">            req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line">                formData += params</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// post参数接受完毕</span></span><br><span class="line">            req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(formData)</span><br><span class="line">                <span class="comment">// console.log(queryString.parse(formData));</span></span><br><span class="line">                <span class="comment">// 用queryString 可以拿到post请求的参数</span></span><br><span class="line">                <span class="keyword">let</span> user = queryString.<span class="title function_">parse</span>(formData);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// updateOne 第一个参数是查询条件， 第二个参数是呀修改的数据</span></span><br><span class="line">                <span class="keyword">await</span> <span class="title class_">User</span>.<span class="title function_">updateOne</span>(&#123;<span class="attr">_id</span>: query.<span class="property">id</span>&#125;, user);</span><br><span class="line">                <span class="comment">// **** </span></span><br><span class="line">                <span class="comment">// 添加成功重定向到 /list 地址</span></span><br><span class="line">                <span class="comment">// 301 表示重定向</span></span><br><span class="line">                <span class="comment">// ****</span></span><br><span class="line">                res.<span class="title function_">writeHead</span>(<span class="number">301</span>, &#123;</span><br><span class="line">                    <span class="attr">location</span>: <span class="string">&#x27;/list&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line">                res.<span class="title function_">end</span>()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/py/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/py/" class="post-title-link" itemprop="url"> py</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-28 15:31:30" itemprop="dateCreated datePublished" datetime="2023-02-28T15:31:30+08:00">2023-02-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/webpack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/webpack/" class="post-title-link" itemprop="url">webpack</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-28 14:22:02" itemprop="dateCreated datePublished" datetime="2023-02-28T14:22:02+08:00">2023-02-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/react/" class="post-title-link" itemprop="url">react</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-28 14:21:52" itemprop="dateCreated datePublished" datetime="2023-02-28T14:21:52+08:00">2023-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-03-03 00:25:47" itemprop="dateModified" datetime="2023-03-03T00:25:47+08:00">2023-03-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="react-基础"><a href="#react-基础" class="headerlink" title="react 基础"></a>react 基础</h1><h1 id="react-项目创建"><a href="#react-项目创建" class="headerlink" title="react 项目创建"></a>react 项目创建</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">    </span><br><span class="line">npm i -g create-react-app <span class="comment">// 全局下载 create-react-app 脚手架工具</span></span><br><span class="line"></span><br><span class="line">D:  <span class="comment">//进入D盘</span></span><br><span class="line">mkdir ReactDemo  <span class="comment">//创建ReactDemo文件夹</span></span><br><span class="line">create-react-app demo01   <span class="comment">//用脚手架创建React项目</span></span><br><span class="line">cd demo01   <span class="comment">//等创建完成后，进入项目目录</span></span><br><span class="line">npm start   <span class="comment">//预览项目，如果能正常打开，说明项目创建成功</span></span><br></pre></td></tr></table></figure>

<h1 id="第一个组件"><a href="#第一个组件" class="headerlink" title="第一个组件"></a>第一个组件</h1><p>再src 下新建一个index.js 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;</span><br><span class="line">import App from &#x27;./App&#x27;</span><br><span class="line">ReactDOM.render(&lt;App /&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<p>目前App组件还没有的，需要一会建立</p>
<p>App组件的编写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class App extends Component&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                Hello JSPang</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<h1 id="JSX简介"><a href="#JSX简介" class="headerlink" title="JSX简介"></a>JSX简介</h1><p>JSX是js和XML结合的一种格式。 React发明了JSX，可以方便HTML语法来创建虚拟DOM， 遇到&lt;, JSX解析为HTML， 遇到{ 就当js解析</p>
<h2 id="组件和普通JSX语法区别"><a href="#组件和普通JSX语法区别" class="headerlink" title="组件和普通JSX语法区别"></a>组件和普通JSX语法区别</h2><p>组件首字母大写，JSX是小写字母开头</p>
<h2 id="JSX中使用js语法，-使用三元表达式"><a href="#JSX中使用js语法，-使用三元表达式" class="headerlink" title="JSX中使用js语法， 使用三元表达式"></a>JSX中使用js语法， 使用三元表达式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">const Component = React.Component</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class App extends Component&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;ul className=&quot;my-list&quot;&gt;</span><br><span class="line">                &lt;li&gt;&#123;false?&#x27;JSPang.com&#x27;:&#x27;技术胖&#x27;&#125;&lt;/li&gt;</span><br><span class="line">                &lt;li&gt;I love React&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<h1 id="Frament-标签"><a href="#Frament-标签" class="headerlink" title="Frament 标签"></a>Frament 标签</h1><p>加上最外层的DIV，组件就是完全正常的，但是你的布局就偏不需要这个最外层的标签怎么办?比如我们在作<code>Flex</code>布局的时候,外层还真的不能有包裹元素。这种矛盾其实React16已经有所考虑了，为我们准备了<code>&lt;Fragment&gt;</code>标签。</p>
<p>要想使用<code>&lt;Fragment&gt;</code>，需要先进行引入。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;<span class="title class_">Component</span>,<span class="title class_">Fragment</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br></pre></td></tr></table></figure>

<p>然后把最外层的<code>&lt;div&gt;</code>标签，换成<code>&lt;Fragment&gt;</code>标签，代码如下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;<span class="title class_">Component</span>,<span class="title class_">Fragment</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Xiaojiejie</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>  (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Fragment</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> /&gt;</span> <span class="tag">&lt;<span class="name">button</span>&gt;</span> 增加服务 <span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                   <span class="tag">&lt;<span class="name">li</span>&gt;</span>头部按摩<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                   <span class="tag">&lt;<span class="name">li</span>&gt;</span>精油推背<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               <span class="tag">&lt;/<span class="name">ul</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Fragment</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Xiaojiejie</span> </span><br></pre></td></tr></table></figure>

<p>这时候你再去浏览器的<code>Elements</code>中查看，就回发现已经没有外层的包裹了。</p>
<h1 id="响应式设计和数据绑定"><a href="#响应式设计和数据绑定" class="headerlink" title="响应式设计和数据绑定"></a>响应式设计和数据绑定</h1><p><code>React</code>不建议你直接操作<code>DOM</code>元素,而是要通过数据进行驱动，改变界面中的效果。React会根据数据的变化，自动的帮助你完成界面的改变。所以在写React代码时，你无需关注DOM相关的操作，只需要关注数据的操作就可以了（这也是React如此受欢迎的主要原因，大大加快了我们的开发速度）。</p>
<p>。数据定义在<code>组件中的构造函数里</code>constructor&#96;。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js的构造函数，由于其他任何函数执行</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line">    <span class="variable language_">super</span>(props) <span class="comment">//调用父类的构造函数，固定写法</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span>=&#123;</span><br><span class="line">        <span class="attr">inputValue</span>:<span class="string">&#x27;&#x27;</span> , <span class="comment">// input中的值</span></span><br><span class="line">        <span class="attr">list</span>:[]    <span class="comment">//服务列表</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>React</code>中的数据绑定和<code>Vue</code>中几乎一样，也是采用<code>字面量</code>(我自己起的名字)的形式，就是使用<code>&#123;&#125;</code>来标注，其实这也算是js代码的一种声明。比如现在我们要把<code>inputValue</code>值绑定到<code>input</code>框中，只要写入下面的代码就可以了。其实说白了就是在JSX中使用js代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;this.state.inputValue&#125;</span> /&gt;</span> </span><br></pre></td></tr></table></figure>

<p>现在需要看一下是不是可以实现绑定效果，所以把<code>inputValue</code>赋予一个’jspang’，然后预览看一下效果。在这里我们并没有进行任何的<code>DOM</code>操作，但是界面已经发生了变化，这些都时<code>React</code>帮我们作的，它还会自动感知数据的变化。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/detailed?id=46#toc333">绑定事件</a></p>
<p>这时候你到界面的文本框中去输入值，是没有任何变化的，这是因为我们强制绑定了<code>inputValue</code>的值。如果要想改变，需要绑定<strong>响应事件</strong>，改变<code>inputValue</code>的值。比如绑定一个改变事件，这个事件执行<code>inputChange()</code>(当然这个方法还没有)方法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;this.state.inputValue&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.inputChange&#125;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在还没有<code>inputChange()</code>这个方法，在<code>render()</code>方法的下面建立一个<code>inputChange()</code>方法，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inputChange(e)&#123;</span><br><span class="line">       console.log(e);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>这时候会发现响应事件可以使用了，但是如何获得我们输入的值那，程序中输入下面的代码。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">inputChange</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时候控制台是可以打印出输入的值的，视频中会有演示。看到获得了输入的值，想当然的认为直接改变<code>inputValue</code>的值就可以了(错的).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">inputChange</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">inputValue</span>=e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>写完后再进行预览，会发现程序直接报错了（加项服务还真的有点难度哦,大宝剑不好作的………..）。</p>
<p>其实我们范了两个错误：</p>
<ol>
<li>一个是<code>this</code>指向不对，你需要重新用<code>bind</code>设置一下指向(ES6的语法)。</li>
<li>另一个是<code>React</code>中改变值需要使用<code>this.setState</code>方法。</li>
</ol>
<p>第一个错误很好解决，直接再<code>JSX</code>部分，利用<code>bind</code>进行绑定就好。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input value=&#123;this.state.inputValue&#125; onChange=&#123;this.inputChange.bind(this)&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p>这步做完，我们还需要加入<code>setState</code>方法，改变值。代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">inputChange</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="comment">// console.log(e.target.value);</span></span><br><span class="line">    <span class="comment">// this.state.inputValue=e.target.value;</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        <span class="attr">inputValue</span>:e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在测试一下，输入框可以改变值了，其实这节课很重要，里边设计了<code>React</code>的重要思想，建议这节课可以反复多看两遍，虽然不难，但是这是一个最基本的思想的转变。下节课可要真的增加服务项目了。</p>
<h1 id="循环渲染列表"><a href="#循环渲染列表" class="headerlink" title="循环渲染列表"></a>循环渲染列表</h1><p>如何根据多个数据动态显示多个li标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">constructor(props)&#123;</span><br><span class="line">    super(props) //调用父类的构造函数，固定写法</span><br><span class="line">    this.state=&#123;</span><br><span class="line">        inputValue:&#x27;jspang&#x27; , // input中的值</span><br><span class="line">        //----------主要 代码--------start</span><br><span class="line">        list:[&#x27;基础按摩&#x27;,&#x27;精油推背&#x27;]   </span><br><span class="line">        //----------主要 代码--------end</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有了数据list之后，可以再jsx部分进行循环输出。代码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">Frament</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.inputValue&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.inputChange.bind(this)&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>增值服务<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             	&#123;</span></span><br><span class="line"><span class="language-xml">                    this.state.map((item, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                        return <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#125;)</span></span><br><span class="line"><span class="language-xml">                &#125;     </span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Frament</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完成上面的步骤，数据就不再是固定的了，而是动态管理的，也为我们接下来的添加打下了基础，剩下的步骤也显得很简单了</p>
<h1 id="解决key值错误"><a href="#解决key值错误" class="headerlink" title="解决key值错误"></a>解决key值错误</h1><p>。这个错误的大概意思就是缺少<code>key值</code>。就是在用map循环时，需要设置一个不同的值，这个时React的要求。我们可以暂时用<code>index+item</code>的形式来实现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        this.state.list.map((item,index)=&gt;&#123;</span><br><span class="line">            return &lt;li key=&#123;index+item&#125;&gt;&#123;item&#125;&lt;/li&gt;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/ul&gt;  </span><br></pre></td></tr></table></figure>

<h1 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h1><p>获得了数据下标后,删除数据就变的容易起来.先声明一个局部变量,然后利用传递过来的下标,删除数组中的值.删除后用<code>setState</code>更新数据就可以了.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除单项服务</span></span><br><span class="line"><span class="title function_">deleteItem</span>(<span class="params">index</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> list = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span></span><br><span class="line">    list.<span class="title function_">splice</span>(index,<span class="number">1</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        <span class="attr">list</span>:list</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实这里边是有一个坑的,有的小伙伴肯定会认为下面的代码也是正确的.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除单项服务</span></span><br><span class="line"><span class="title function_">deleteItem</span>(<span class="params">index</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>.<span class="title function_">splice</span>(index,<span class="number">1</span>) <span class="comment">// 这里直接删除是有问题的</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        <span class="attr">list</span>:<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span></span><br><span class="line">    &#125;) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>记住React是禁止直接操作state的,虽然上面的方法也管用,但是在后期的性能优化上会有很多麻烦,所以一定不要这样操作.这也算是我<code>React</code>初期踩的比较深的一个坑,希望小伙伴们可以跳坑.</p>
<h1 id="JSX-几个坑"><a href="#JSX-几个坑" class="headerlink" title="JSX 几个坑"></a>JSX 几个坑</h1><ol>
<li><p>注释的写法要再{} 中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//第一次写注释，这个是错误的</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;input value=&#123;this.state.inputValue&#125; onChange=&#123;this.inputChange.bind(this)&#125; /&gt;</span><br><span class="line">    &lt;button onClick=&#123;this.addList.bind(this)&#125;&gt; 增加服务 &lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;/* 正确注释的写法 */&#125;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;input value=&#123;this.state.inputValue&#125; onChange=&#123;this.inputChange.bind(this)&#125; /&gt;</span><br><span class="line">    &lt;button onClick=&#123;this.addList.bind(this)&#125;&gt; 增加服务 &lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>class 的写法 要用className 而不是 class</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 错误写法</span><br><span class="line">&lt;input class=&quot;input&quot; value=&#123;this.state.inputValue&#125;  /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 正确写法 使用className</span><br><span class="line">&lt;input className=&quot;input&quot; value=&#123;this.state.inputValue&#125;  /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>html 解析问题， 如果我们想再文本input 中输入 <h1></h1> 并进行渲染， 是不会生效的</p>
<p>， 可以使用 dangerouslySetInnerHTML 属性解决</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &#123;</span><br><span class="line">      this.state.list.map((item, index) =&gt; &#123;</span><br><span class="line">          return &lt;li key=&#123;index+item&#125; onClick=&#123;this.deleteItem.bind(this, index)&#125; dangerouslySetInnerHTML=&#123;&#123;__html:item&#125;&#125;&gt;&lt;/li&gt;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">         &lt;/ul&gt;</span><br></pre></td></tr></table></figure>



<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210629161829926.png" alt="image-20210629161829926"></p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210629161850386.png" alt="image-20210629161850386"></p>
</li>
<li><p>关于label 也是个不小的坑</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">label</span>&gt;</span>加入服务：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">className</span>=<span class="string">&quot;input&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.inputValue&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.inputChange.bind(this)&#125;</span> /&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.addList.bind(this)&#125;</span>&gt;</span> 增加服务 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>我们如果想 点击加入服务时 也input 框进行聚焦的话， 按照之前html 的思路 只需要使用 id； 即：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;jspang&quot;</span>&gt;</span>加入服务：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;jspang&quot;</span> <span class="attr">className</span>=<span class="string">&quot;input&quot;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.inputValue&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.inputChange.bind(this)&#125;</span> /&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.addList.bind(this)&#125;</span>&gt;</span> 增加服务 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>** 但是这个再jsx 中时会报错的， 会提示你使用htmlFor</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;label htmlFor=&quot;jspang&quot;&gt;加入服务：&lt;/label&gt;</span><br><span class="line">    &lt;input id=&quot;jspang&quot; className=&quot;input&quot; value=&#123;this.state.inputValue&#125; onChange=&#123;this.inputChange.bind(this)&#125; /&gt;</span><br><span class="line">    &lt;button onClick=&#123;this.addList.bind(this)&#125;&gt; 增加服务 &lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="simple-React-Snippets-插件"><a href="#simple-React-Snippets-插件" class="headerlink" title="simple React Snippets 插件"></a>simple React Snippets 插件</h1><p>imrc 快速引入语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &#x27;react&#x27;;</span><br></pre></td></tr></table></figure>

<p>cc  快速生成以下代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class  extends Component &#123;</span><br><span class="line">    state = &#123;  &#125;</span><br><span class="line">    render() &#123; </span><br><span class="line">        return (  );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default ;</span><br></pre></td></tr></table></figure>

<h1 id="父子组件传值"><a href="#父子组件传值" class="headerlink" title="父子组件传值"></a>父子组件传值</h1><h2 id="父组件向子组件传值：-靠属性的方式进行传值"><a href="#父组件向子组件传值：-靠属性的方式进行传值" class="headerlink" title="父组件向子组件传值： 靠属性的方式进行传值"></a>父组件向子组件传值： 靠属性的方式进行传值</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123; <span class="comment">// 父组件中</span></span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">son</span> <span class="attr">content</span> = <span class="string">&#123;a&#125;</span>&gt;</span> // 利用 content 属性 传递值时 a 的值 </span></span><br><span class="line"><span class="language-xml">	)</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">// 子组件中</span></span><br><span class="line"><span class="language-xml">class Son extends Component &#123;</span></span><br><span class="line"><span class="language-xml">	render() &#123;</span></span><br><span class="line"><span class="language-xml">		return &#123; // 在子组件中就可以直接拿到porps 中的 content</span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">div</span>&gt;</span> &#123;this.props.content&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		&#125;</span></span><br><span class="line"><span class="language-xml">	&#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml">export default Son</span></span><br></pre></td></tr></table></figure>





<h2 id="子组件向父组件传值"><a href="#子组件向父组件传值" class="headerlink" title="子组件向父组件传值"></a>子组件向父组件传值</h2><p>因为react规定，子组件不能直接操作父组件里的数据， 所以要借助一个父组件的方法 deleteOne（也就是将父组件的deleteOne方法传递给子组件）</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件中</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">	<span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> &#123; <span class="comment">// 在子组件中就可以直接拿到porps 中的 content</span></span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick.bind(this)&#125;</span>&gt;</span> &#123;this.props.content&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">deleteItem</span>(<span class="number">1</span>) <span class="comment">// 这里执行deleteItem 其实就是执行父组件的 deleteOne 方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Son</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123; <span class="comment">// 父组件中</span></span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">		<span class="language-xml"><span class="tag">&lt;<span class="name">son</span> <span class="attr">content</span> = <span class="string">&#123;a&#125;</span> <span class="attr">deleteItem</span>=<span class="string">&#123;this.deleteOne&#125;</span>&gt;</span> // 利用 deleteItem 属性 传递 方法给子组件 </span></span><br><span class="line"><span class="language-xml">	)</span></span><br><span class="line"><span class="language-xml">    deleteOne(val) &#123;</span></span><br><span class="line"><span class="language-xml">        this.setState(&#123; // val就是1</span></span><br><span class="line"><span class="language-xml">            a: val</span></span><br><span class="line"><span class="language-xml">        &#125;)</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">**** react中state改变了，组件才会update。</span></span><br><span class="line"><span class="language-xml">1. 父写好state和处理该state的函数，同时将函数名通过props属性值的形式传入子，</span></span><br><span class="line"><span class="language-xml">2. 子调用父的函数可以进行传递数据，同时引起state变化</span></span><br></pre></td></tr></table></figure>



<h1 id="react-单项数据流"><a href="#react-单项数据流" class="headerlink" title="react 单项数据流"></a>react 单项数据流</h1><p>对于父子间传递过来的数据， 子组件只能读取， 不能进行修改；</p>
<h1 id="PropTypes-应用"><a href="#PropTypes-应用" class="headerlink" title="PropTypes 应用"></a>PropTypes 应用</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">improt PropTypes from &#x27;prop-types&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class XiaojiejieItem extends Component &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PropTypes 用来限制从父组件传递过来的数据类型；因为大型项目，如果你不校验，后期会变的异常混乱，业务逻辑也没办法保证。</span><br><span class="line">XiaojiejieItem.propTypes = &#123; </span><br><span class="line">	content: PropTypes.string,</span><br><span class="line">	deleteItem: PropTypes.func,</span><br><span class="line">	index: PropTypes.number.isRequired // 表示必须做</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 默认值 props ： 表示如果我们没有传递属性值， 可以默认给一个值</span><br><span class="line"></span><br><span class="line">XiaojiejieItem.defaultProps = &#123;</span><br><span class="line">	avname: &#x27;松岛枫&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="ref-的使用"><a href="#ref-的使用" class="headerlink" title="ref 的使用"></a>ref 的使用</h1><p>再编写组件方法时， 经常会遇到语义化很模糊的代码，这对于review 或者合作开发 是很不友好的。 或者当核心成员离开时， 项目甚至会面临倒闭的问题。 我们必须重视react 代码中的语义话。 ref 是个不错的工具</p>
<ol>
<li><p>代替原来的e.target.value</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">inputChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">		<span class="attr">inputValue</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/*使用ref进行， 现在jsx中进行绑定，使用es6语法*/</span>&#125;；</span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;&quot;</span> value=&#123;<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">inputValue</span>&#125;</span><br><span class="line">	onChange=&#123;<span class="variable language_">this</span>.<span class="property">inputChange</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)&#125;</span><br><span class="line">	ref=&#123;<span class="function">(<span class="params">input</span>) =&gt;</span> &#123;<span class="variable language_">this</span>.<span class="property">input</span> = input&#125;&#125;</span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用ref语义话绑定后的 方法代码</span></span><br><span class="line"><span class="title function_">inputChange</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        <span class="attr">inputValue</span>: <span class="variable language_">this</span>.<span class="property">input</span>.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="ref的坑，-setState-是一个异步函数"><a href="#ref的坑，-setState-是一个异步函数" class="headerlink" title="ref的坑， setState 是一个异步函数"></a>ref的坑， setState 是一个异步函数</h1><p><a target="_blank" rel="noopener" href="https://jspang.com/detailed?id=46#toc367"><code>ref</code>使用中的坑</a></p>
<p>比如现在我们要用ref绑定取得要服务的数量，可以先用<code>ref</code>进行绑定。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul ref=&#123;<span class="function">(<span class="params">ul</span>)=&gt;</span>&#123;<span class="variable language_">this</span>.<span class="property">ul</span>=ul&#125;&#125;&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">                <span class="language-xml"><span class="tag">&lt;<span class="name">XiaojiejieItem</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">key</span>=<span class="string">&#123;index+item&#125;</span>  </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">content</span>=<span class="string">&#123;item&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">index</span>=<span class="string">&#123;index&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">deleteItem</span>=<span class="string">&#123;this.deleteItem.bind(this)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                /&gt;</span></span></span><br><span class="line">            )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/ul&gt;  </span><br></pre></td></tr></table></figure>

<p>绑定后可以在<code>addList()</code>方法中，获取当前<code>&lt;div&gt;</code>的值.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">addList</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        <span class="attr">list</span>:[...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>,<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">inputValue</span>],</span><br><span class="line">        <span class="attr">inputValue</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//关键代码--------------start</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ul</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;div&#x27;</span>).<span class="property">length</span>)</span><br><span class="line">    <span class="comment">//关键代码--------------end</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时候你打开控制台，点击添加服务按钮，你会返现数量怎么少一个？（就是这个坑），其实这个坑是因为React中更多<code>setState</code>是一个异步函数所造成的。也就是这个<code>setState</code>，代码执行是有一个时间的，如果你真的想了解清楚，你需要对什么是虚拟DOM有一个了解。简单的说，就是因为是异步，还没等虚拟Dom渲染，我们的<code>console.log</code>就已经执行了。</p>
<p>那这个代码怎么编写才会完全正常那，其实<code>setState</code>方法提供了一个回调函数，也就是它的第二个函数。下面这样写就可以实现我们想要的方法了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addList</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        <span class="attr">list</span>:[...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>,<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">inputValue</span>],</span><br><span class="line">        <span class="attr">inputValue</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">//关键代码--------------start</span></span><br><span class="line">    &#125;,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ul</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;div&#x27;</span>).<span class="property">length</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//关键代码--------------end</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在到浏览器中查看代码，就完全正常了。这节课主要学习了<code>ref</code>的用法和<code>ref</code>中的坑。学完后练习一下吧，代码这东西，不练习你是学不会的。</p>
<h1 id="React-的生命周期"><a href="#React-的生命周期" class="headerlink" title="React 的生命周期"></a>React 的生命周期</h1><ul>
<li><p>四个阶段</p>
<ol>
<li>初始化阶段： initialization</li>
<li>挂载阶段：mounting : componentWillMount、 render、 componentDidMount</li>
<li>更新阶段：updating : shouldCompoentUpdate、 componentWillUpdate、 componentDidUpdate、 componentWillReceiveProps</li>
<li>销毁阶段: unmounting</li>
</ol>
</li>
<li><p>什么是生命周期函数： 在某个时刻组件会自动调用执行的函数</p>
<p>例如： render 函数就是一个生命周期函数， 它会在state 发生改变时自动执行</p>
</li>
<li><p>mounting 阶段 叫做挂载阶段， 伴随这整个虚拟DOM的生成， 它里面有三个小的生命周期函数， 分别是</p>
<ol>
<li><p>componentWillMount: 组件即将被挂载到页面的时刻执行。</p>
</li>
<li><p>render: 页面state或props发生改变时执行。</p>
</li>
<li><p>componentDidMount: 组件挂载完成时执行。</p>
<ul>
<li><p>注意：</p>
<p>componentWillMount 和 componentDIdMout 这两个生命周期函数， 只在页面中刷新时执行一次，而render 只要在 state 和 props 变化就会执行</p>
<p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210630095759823.png" alt="image-20210630095759823"></p>
</li>
</ul>
</li>
</ol>
</li>
<li><p>updating 阶段 组件发生改变更新的阶段：  有两个基本的部分引发更新： 1. props 属性改变， 2. state状态改变</p>
<ol>
<li><p>shouldComponentUpdate 在组件更新之前， 自动执行。 这个函数必须要求返回一个boolean 值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">	// nextProps 表示下一个props的值</span><br><span class="line">	// nextstate 表示下一个state的值</span><br><span class="line">	// 当props 改变或者 state 改变 react 会渲染整个组件；</span><br><span class="line">	if (nextProps.title === this.props.title) &#123;</span><br><span class="line">		return false // 如果两次title 相同没必要去进行渲染 浪费性能</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return true</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 返回true 同意组件更新 </span><br><span class="line">// 返回false 不同一组件更新</span><br></pre></td></tr></table></figure>

<p>如果返回false 那么组件就不会执行componentWillUpdate函数</p>
</li>
<li><p>componentWillUpdate 函数， 也发生在组件更新之前执行， 但在shouldComponentUpdate之后 执行。如果 shouldComponentUpdate 返回false ， 这个函数就不会执行</p>
</li>
<li><p>componentDidUpdate 函数， 在组件更新之后执行，</p>
</li>
<li><p>compoentWillReceiveProps</p>
<p>这个函数如果是顶层组件 那么就不执行； 如果是子组件， 那么接受到父组件传递过来的参数，此时</p>
<p><code> 父组件render函数执行时，这个函数也会被执行。简单说这个函数执行取决于父组件的是否更新</code></p>
</li>
</ol>
</li>
<li><p>销毁阶段</p>
<ol>
<li>componentWillUnmount 函数， 当组件从页面中删除的时候执行</li>
</ol>
</li>
</ul>
<h1 id="npm-install-xxx-和-npm-install-xxx-g-、-npm-i-xxx-–save、-npm-i-xxx-–save-dev-的区别"><a href="#npm-install-xxx-和-npm-install-xxx-g-、-npm-i-xxx-–save、-npm-i-xxx-–save-dev-的区别" class="headerlink" title="npm install  xxx  和 npm install xxx -g  、 npm i xxx –save、 npm i xxx –save-dev 的区别"></a>npm install  xxx  和 npm install xxx -g  、 npm i xxx –save、 npm i xxx –save-dev 的区别</h1><ol>
<li>npm i xxx 安装第三方包到项目目录下， 不会将模块依赖写入 devDependence 和 dependencies </li>
<li>npm i xxx -g ： 安装包到磁盘中， 具体在哪个磁盘要看 npm cinfig prefix 的位置</li>
<li>npm i –save xxx:  –save 的意思是将模块安装到项目目录下并在dependencies 写入， 运行依赖</li>
<li>npm i –save-dev xxx: –save-dev 会安装在项目目录下 并在devDenpendencies 写入 开发依赖</li>
</ol>
<h1 id="安装-react-transition-group"><a href="#安装-react-transition-group" class="headerlink" title="安装 react-transition-group"></a>安装 react-transition-group</h1><ol>
<li><p>首先进行安装模块 npm install react-transition-group –savae</p>
<p>这个模块有三个核心库 Transiton CssTransition TransitonGroup</p>
</li>
<li><p>使用CssTransition</p>
<ul>
<li><p>引入 import {CssTransition} from ‘react-transition-group’;</p>
</li>
<li><p>&#96;&#96;&#96;<br>render() {<br>return (<br>    <div><br>        &lt;CSSTransition &#x2F;&#x2F;这里使用csstransition 进行包裹 <div>BOSS级人物-孙悟空</div><br>            in&#x3D;{this.state.isShow}   &#x2F;&#x2F;用于判断是否出现的状态<br>            timeout&#x3D;{2000}           &#x2F;&#x2F;动画持续时间<br>            classNames&#x3D;”boss-text”   &#x2F;&#x2F;className值，防止重复 这里写的classNames<br>        &gt;<br>            <div>BOSS级人物-孙悟空</div><br>        </CSSTransition><br>        <div><button onClick={this.toToggole}>召唤Boss</button></div><br>    </div><br>    );<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- css样式</span><br><span class="line"></span><br><span class="line">  - xxx-enter: 进入（入场）前的CSS样式；</span><br><span class="line">  - xxx-enter-active:进入动画直到完成时之前的CSS样式;</span><br><span class="line">  - xxx-enter-done:进入完成时的CSS样式;</span><br><span class="line">  - xxx-exit:退出（出场）前的CSS样式;</span><br><span class="line">  - xxx-exit-active:退出动画知道完成时之前的的CSS样式。</span><br><span class="line">  - xxx-exit-done:退出完成时的CSS样式</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>.boss-text-enter{<br>opacity: 0;<br>}<br>.boss-text-enter-active{<br>opacity: 1;<br>transition: opacity 2000ms;<br>}<br>.boss-text-enter-done{<br>opacity: 1;<br>}<br>.boss-text-exit{<br>opacity: 1;<br>}<br>.boss-text-exit-active{<br>opacity: 0;<br>transition: opacity 2000ms;<br>}<br>.boss-text-exit-done{<br>opacity: 0;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 我们给`&lt;CSSTransition&gt;`加上`unmountOnExit`,加上这个的意思是在元素退场时，自动把DOM也删除，这是以前用CSS动画没办法做到的。</span><br><span class="line"></span><br><span class="line"># transitionGroup</span><br><span class="line"></span><br><span class="line">&lt;CSSTransition&gt; 只能控制一个DOM元素的动画， 向控制多个动画  需要使用 transitionGroup 模块</span><br><span class="line"></span><br><span class="line">1. 引入</span><br><span class="line"></span><br><span class="line">   ```jsx</span><br><span class="line">   import &#123;CSSTransition, TransitionGroup&#125; from &#x27;react-transition-group&#x27;;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li><p>用<TransitionGroup> 包裹住 多个 dom 元素</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul ref=&#123;<span class="function">(<span class="params">ul</span>)=&gt;</span>&#123;<span class="variable language_">this</span>.<span class="property">ul</span>=ul&#125;&#125;&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">TransitionGroup</span>&gt;</span> &#123;/*这里包裹住了多个dom内容*/&#125;</span></span><br><span class="line"><span class="language-xml">    &#123;</span></span><br><span class="line"><span class="language-xml">        this.state.list.map((item,index)=&gt;&#123;</span></span><br><span class="line"><span class="language-xml">            return (</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">CSSTransition</span> <span class="attr">这里一定要加入</span>&lt;<span class="attr">CssTranstion</span>&gt;</span> 标签</span></span><br><span class="line"><span class="language-xml">                    timeout=&#123;1000&#125;</span></span><br><span class="line"><span class="language-xml">                    classNames=&#x27;boss-text&#x27;</span></span><br><span class="line"><span class="language-xml">                    unmountOnExit</span></span><br><span class="line"><span class="language-xml">                    appear=&#123;true&#125;</span></span><br><span class="line"><span class="language-xml">                    key=&#123;index+item&#125;  </span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">XiaojiejieItem</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">content</span>=<span class="string">&#123;item&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">index</span>=<span class="string">&#123;index&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">deleteItem</span>=<span class="string">&#123;this.deleteItem.bind(this)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">CSSTransition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            )</span></span><br><span class="line"><span class="language-xml">        &#125;)</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">TransitionGroup</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>  </span><br></pre></td></tr></table></figure>
</li>
<li><p>这里一定要加入<CssTranstion> 标签 ， 可以为dom 设置classNames 属性和 timeout等</p>
</li>
</ol>
</li>
</ol>
<h1 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h1><h1 id="react-router"><a href="#react-router" class="headerlink" title="react-router"></a>react-router</h1><p>react-router 是一个基础react的路由库， 它可以让你向应用中快速添加视图和数据流， 同时保持页面与url间的同步。 凡是ract技术栈的项目， 都需要用到react-router；</p>
<h2 id="用create-react-app-脚手架初始化项目"><a href="#用create-react-app-脚手架初始化项目" class="headerlink" title="用create-react-app 脚手架初始化项目"></a>用create-react-app 脚手架初始化项目</h2><ol>
<li><p><code>cnpm install -g create-react-app</code> </p>
</li>
<li><p>直接使用脚手架工具创建项目</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">D:  //进入D盘</span><br><span class="line">mkdir ReactRouterDemo   //创建ReactRouterDemo文件夹</span><br><span class="line">cd ReactRouterDemo      //进入文件夹</span><br><span class="line">create-react-app demo  //用脚手架创建React项目</span><br><span class="line">cd demo   //等项目创建完成后，进入项目目录</span><br><span class="line">npm  start  //预览项</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装react-router <code>cnpm install --save react-router-dom</code></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://jspang.com/detailed?id=49#toc34">编写一个最简单的路由程序</a></p>
<p>首先我们改写<code>src</code>文件目录下的<code>index.js</code>代码。改为下面的代码,具体的意思在视频中讲解:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AppRouter</span> <span class="keyword">from</span> <span class="string">&#x27;./AppRouter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">AppRouter</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>现在的<code>AppRouter</code>组件是没有的，我们可以在<code>src</code>目录下建立一个<code>AppRouter.js</code>文件，然后写入下面的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BrowserRouter</span> <span class="keyword">as</span> <span class="title class_">Router</span>, <span class="title class_">Route</span>, <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Index</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JSPang.com<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>List-Page<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AppRouter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span> <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">Link</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/list/&quot;</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">Link</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">exact</span> <span class="attr">component</span>=<span class="string">&#123;Index&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/list/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;List&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AppRouter</span>;</span><br></pre></td></tr></table></figure>

<p>这时候就可以到浏览器中看一下效果了，如果一切正常，就可以实现页面跳转。但这只是最简单的页面跳转，第一节课先学这么多。</p>
</li>
</ol>
<h1 id="使用ReactRouter"><a href="#使用ReactRouter" class="headerlink" title="使用ReactRouter"></a>使用ReactRouter</h1><h2 id="编写index组件"><a href="#编写index组件" class="headerlink" title="编写index组件"></a>编写index组件</h2><p>先在<code>/src</code>目录下建立一个文件夹，我这里起名叫做<code>Pages</code>（你可以起任何名字），然后建立一个组件文件<code>Index.js</code>。这里边我们就完全安装工作中的模式来写，只是没有什么业务逻辑，UI也制作的相当加简单。代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;  &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123; </span><br><span class="line">        <span class="keyword">return</span> (  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JSPang.com<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure>

<h2 id="编写List组件"><a href="#编写List组件" class="headerlink" title="编写List组件"></a>编写List组件</h2><p>编写完<code>Index</code>组件以后，继续编写<code>List</code>组件。其实这个组件和<code>Index</code>基本一样。代码如下: 再pages文件 创建 List.js 文件s</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">List</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;  &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123; </span><br><span class="line">        <span class="keyword">return</span> (  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>List Page<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">List</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改AppRouter-js"><a href="#修改AppRouter-js" class="headerlink" title="修改AppRouter.js"></a>修改AppRouter.js</h2><p>两个组件制作完成后，我们把它引入路由配置文件，然后进行路由的配置就可以了，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BrowserRouter</span> <span class="keyword">as</span> <span class="title class_">Router</span>, <span class="title class_">Route</span>, <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Index</span> <span class="keyword">from</span> <span class="string">&#x27;./Pages/Index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">List</span> <span class="keyword">from</span> <span class="string">&#x27;./Pages/List&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AppRouter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span> <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">Link</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/list/&quot;</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">Link</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">exact</span> <span class="attr">component</span>=<span class="string">&#123;Index&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/list/&quot;</span> <span class="attr">component</span>=<span class="string">&#123;List&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">AppRouter</span>;</span><br></pre></td></tr></table></figure>

<p>现在看起来就和我们实际工作中差不多了，也和我们平时写的普通<code>html</code>页面很类似了。</p>
<h2 id="exact-精准匹配的意思"><a href="#exact-精准匹配的意思" class="headerlink" title="exact 精准匹配的意思"></a>exact 精准匹配的意思</h2><p>精准匹配就是你的路径信息要完全匹配成功。 才可以实现跳转。 匹配一部分是不行的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&quot;/&quot;  component=&#123;Index&#125; /&gt;</span><br><span class="line">&lt;Route path=&quot;/list/&quot; component=&#123;List&#125; /&gt;</span><br><span class="line"></span><br><span class="line">//  这种情况会 把 Index 和 List 都匹配到</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&quot;/&quot; exact component=&#123;Index&#125; /&gt;</span><br><span class="line">&lt;Route path=&quot;/list/&quot; component=&#123;List&#125; /&gt;</span><br><span class="line"></span><br><span class="line">// 这种情况是正常情况</span><br></pre></td></tr></table></figure>

<h1 id="reactRouter-动态传值"><a href="#reactRouter-动态传值" class="headerlink" title="reactRouter 动态传值"></a>reactRouter 动态传值</h1><p>之前已经搞定了 链接跳转的问题，</p>
<p>那现在想象这样一个场景，在一个很多文章的列表页面，然后点击任何一个链接，都可以准确的打开详细的文章内容，<code>这就需要靠传递文章ID，然后后台准确检索文章内容最后呈现</code>。这个过程每次传递到<code>详细页面的ID值</code>都是不一样的，所以就需要路由有动态传值的能力</p>
<h2 id="再Route上设置允许动态传值"><a href="#再Route上设置允许动态传值" class="headerlink" title="再Route上设置允许动态传值"></a>再Route上设置允许动态传值</h2><p><code>&lt;Route path=&quot;/list:/id&quot; component=&#123;List&#125;&gt;</code></p>
<p>就是path上加上<code>:id</code>。 这样就设置了允许传值规则</p>
<h2 id="Link-上传递值"><a href="#Link-上传递值" class="headerlink" title="Link 上传递值"></a>Link 上传递值</h2><p>设置好规则后，就可以在<code>Link</code>上设置值了，现在设置传递的ID值了，这时候不用再添加id了，直接写值就可以了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;&lt;Link to=&quot;/list/123&quot;&gt;列表&lt;/Link&gt; &lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>现在就可以进行传值了。为了方便你的学习，这里给出全部<code>AppRouter.js</code>代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import &#123; BrowserRouter as Router, Route, Link &#125; from &quot;react-router-dom&quot;;</span><br><span class="line">import Index from &#x27;./Pages/Index&#x27;</span><br><span class="line">import List from &#x27;./Pages/List&#x27;</span><br><span class="line">function AppRouter() &#123;  </span><br><span class="line">    return (    </span><br><span class="line">        &lt;Router&gt;        </span><br><span class="line">            &lt;ul&gt;            </span><br><span class="line">                &lt;li&gt; &lt;Link to=&quot;/&quot;&gt;首页&lt;/Link&gt; &lt;/li&gt;            </span><br><span class="line">                &lt;li&gt;&lt;Link to=&quot;/list/123&quot;&gt;列表&lt;/Link&gt; &lt;/li&gt;        </span><br><span class="line">            &lt;/ul&gt;        </span><br><span class="line">            &lt;Route path=&quot;/&quot; exact component=&#123;Index&#125; /&gt;        </span><br><span class="line">            &lt;Route path=&quot;/list/:id&quot; component=&#123;List&#125; /&gt;    </span><br><span class="line">        &lt;/Router&gt;  </span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">export default AppRouter;</span><br></pre></td></tr></table></figure>

<h2 id="在List组件上接受并显示传递值"><a href="#在List组件上接受并显示传递值" class="headerlink" title="在List组件上接受并显示传递值"></a>在List组件上接受并显示传递值</h2><p>组件接收传递过来的值的时候，可以在声明周期<code>componentDidMount</code>中进行，传递的值在<code>this.props.match</code>中。我们可以先打印出来,代码如下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">List</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;        </span><br><span class="line">        <span class="variable language_">super</span>(props);        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;  &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;         </span><br><span class="line">        <span class="keyword">return</span> (  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>List Page<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span> );    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">//-关键代码---------start    </span></span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;        </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">match</span>)    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">//-关键代码---------end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">List</span>;</span><br></pre></td></tr></table></figure>

<p>然后在浏览器的控制台中可以看到打印出的对象，对象包括三个部分:</p>
<ul>
<li>patch:自己定义的路由规则，可以清楚的看到是可以产地id参数的。</li>
<li>url: 真实的访问路径，这上面可以清楚的看到传递过来的参数是什么。</li>
<li>params：传递过来的参数，<code>key</code>和<code>value</code>值。</li>
</ul>
<p>明白了match中的对象属性，就可以轻松取得传递过来的ID值了。代码如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">List</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;        </span><br><span class="line">        <span class="variable language_">super</span>(props);        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;  &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;         </span><br><span class="line">        <span class="keyword">return</span> (  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>List Page-&gt;&#123;this.state.id&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span> );    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;       </span><br><span class="line">        <span class="comment">// console.log(this.props.match.params.id)       </span></span><br><span class="line">        <span class="keyword">let</span> tempId=<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">match</span>.<span class="property">params</span>.<span class="property">id</span>        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">id</span>:tempId &#125;)    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">List</span>;</span><br></pre></td></tr></table></figure>

<p>这样就实现了动态传值，需要注意的是如果你不传任何东西，是没办法匹配路由成功的。下一节我们更加形象的作一个动态列表，然后进行动态传值。这节课算是一个理论基础吧。</p>
<h2 id="模拟一个列表数组"><a href="#模拟一个列表数组" class="headerlink" title="模拟一个列表数组"></a><a target="_blank" rel="noopener" href="https://jspang.com/detailed?id=49#toc315">模拟一个列表数组</a></h2><p>现在可以在<code>Index</code>组件里模拟一个列表数组，就相当于我们从后台动态获取到的内容，然后数组中包括文章的<code>cid</code>和<code>title</code>。直接在state初始化时进行设置，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;    </span><br><span class="line">     <span class="variable language_">super</span>(props);    </span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">state</span> = &#123;         </span><br><span class="line">        <span class="attr">list</span>:[            </span><br><span class="line">            &#123;<span class="attr">cid</span>:<span class="number">123</span>,<span class="attr">title</span>:<span class="string">&#x27;技术胖的个人博客-1&#x27;</span>&#125;,            </span><br><span class="line">            &#123;<span class="attr">cid</span>:<span class="number">456</span>,<span class="attr">title</span>:<span class="string">&#x27;技术胖的个人博客-2&#x27;</span>&#125;,            </span><br><span class="line">            &#123;<span class="attr">cid</span>:<span class="number">789</span>,<span class="attr">title</span>:<span class="string">&#x27;技术胖的个人博客-3&#x27;</span>&#125;,        </span><br><span class="line">        ]    </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有了<code>list</code>数组后，再修改一下UI，进行有效的遍历，<code>Render</code>代码如下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">render</span>(<span class="params"></span>) &#123;     </span><br><span class="line">    <span class="keyword">return</span> (         </span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>            </span></span><br><span class="line"><span class="language-xml">        &#123;                </span></span><br><span class="line"><span class="language-xml">            this.state.list.map((item,index)=&gt;&#123;                    </span></span><br><span class="line"><span class="language-xml">                return (                        </span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span> &#123;item.title&#125; </span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span>                    </span></span><br><span class="line"><span class="language-xml">                )                </span></span><br><span class="line"><span class="language-xml">            &#125;)            </span></span><br><span class="line"><span class="language-xml">        &#125;        </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>    </span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<p>列表已经可以在<code>Index</code>组件里显示出来了，接下来可以配置<code>&lt;Link&gt;</code>了,在配置之前，你需要先引入<code>Link</code>组件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>引入后直接使用进行跳转就可以，但是需要注意一点，要用<code>&#123;&#125;</code>的形式，也就是把<code>to</code>里边的内容解析成JS的形式，这样才能顺利的传值过去。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;     </span><br><span class="line">    <span class="keyword">return</span> (         </span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>            </span></span><br><span class="line"><span class="language-xml">        &#123;                </span></span><br><span class="line"><span class="language-xml">            this.state.list.map((item,index)=&gt;&#123;                    </span></span><br><span class="line"><span class="language-xml">                return (                        </span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>                            </span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">list</span>/&#x27;+<span class="attr">item.uid</span>&#125;&gt;</span> &#123;item.title&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span>                         </span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span>                    </span></span><br><span class="line"><span class="language-xml">                )                </span></span><br><span class="line"><span class="language-xml">            &#125;)            </span></span><br><span class="line"><span class="language-xml">        &#125;        </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>    </span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>

<p>到目前为止，已经很类似我们项目中的列表向详细页进行传值了。为了方便你学习，给出<code>Index.js</code>的所有代码.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;        </span><br><span class="line">        <span class="variable language_">super</span>(props);        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;             </span><br><span class="line">            <span class="attr">list</span>:[                </span><br><span class="line">                &#123;<span class="attr">uid</span>:<span class="number">123</span>,<span class="attr">title</span>:<span class="string">&#x27;技术胖的个人博客-1&#x27;</span>&#125;,                </span><br><span class="line">                &#123;<span class="attr">uid</span>:<span class="number">456</span>,<span class="attr">title</span>:<span class="string">&#x27;技术胖的个人博客-2&#x27;</span>&#125;,                </span><br><span class="line">                &#123;<span class="attr">uid</span>:<span class="number">789</span>,<span class="attr">title</span>:<span class="string">&#x27;技术胖的个人博客-3&#x27;</span>&#125;,            </span><br><span class="line">            ]         </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;         </span><br><span class="line">        <span class="keyword">return</span> (             </span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>                </span></span><br><span class="line"><span class="language-xml">            &#123;                    </span></span><br><span class="line"><span class="language-xml">                this.state.list.map((item,index)=&gt;&#123;                        </span></span><br><span class="line"><span class="language-xml">                    return (                            </span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>                               </span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">list</span>/&#x27;+<span class="attr">item.uid</span>&#125;&gt;</span> &#123;item.title&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span>                             </span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">li</span>&gt;</span>                        </span></span><br><span class="line"><span class="language-xml">                    )                    </span></span><br><span class="line"><span class="language-xml">                &#125;)                </span></span><br><span class="line"><span class="language-xml">            &#125;            </span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>        </span><br><span class="line">    )    </span><br><span class="line">&#125;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure>

<p>通过四小节的学习，你一定对<code>React Router</code>有了基本的了解，接下来的学习会稍微提升一点难度，所以你先要把这四小节课学好，练好.再向下进行。</p>
<h1 id="reactRouter-重定向-redirect-使用"><a href="#reactRouter-重定向-redirect-使用" class="headerlink" title="reactRouter 重定向-redirect 使用"></a>reactRouter 重定向-redirect 使用</h1><ul>
<li>标签式重定向：利用<Redirect> 标签来进行重定向，业务逻辑不复杂时建议使用这种。</li>
<li>编程式重定向： 利用编程的方式， 一般用于业务逻辑当中，比如登录成功跳转到会员中心</li>
</ul>
<p>重定向和跳转有一个重要的区别：</p>
<p>跳转是可以用浏览器回退按钮 返回上一级的， 而重定向是不可以的</p>
<h2 id="标签式重定向"><a href="#标签式重定向" class="headerlink" title="标签式重定向"></a>标签式重定向</h2><p>首先建立一个<code>Home.js</code>的页面，这个页面我还是用快速生成的方式来进行编写，代码如下。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;        </span><br><span class="line">        <span class="variable language_">super</span>(props);        </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;  &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;         </span><br><span class="line">        <span class="keyword">return</span> (  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是 Home 页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span> );    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</span><br></pre></td></tr></table></figure>

<p>这个页面非常简单，就是一个普通的有状态组件。</p>
<p>有了组件后可以配置一下路由规则，也就是在<code>AppRouter.js</code>里加一个<code>&lt;Route&gt;</code>配置，配置时记得引入<code>Home</code>组件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;./Pages/Home&#x27;</span>&lt;<span class="title class_">Route</span> path=<span class="string">&quot;/home/&quot;</span> component=&#123;<span class="title class_">Home</span>&#125; /&gt;</span><br></pre></td></tr></table></figure>

<p>之后打开<code>Index.js</code>文件，从<code>Index</code>组件重新定向到<code>Home</code>组件，需要先引入<code>Redirect</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Link</span> , <span class="title class_">Redirect</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>引入<code>Redirect</code>后，直接在<code>render</code>函数里使用就可以了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Redirect</span> to=<span class="string">&quot;/home/&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>现在就可以实现页面的重定向。</p>
<h2 id="编程式重定向"><a href="#编程式重定向" class="headerlink" title="编程式重定向"></a><a target="_blank" rel="noopener" href="https://jspang.com/detailed?id=49#toc318">编程式重定向</a></h2><p>编程式重定向就是不再利用<code>&lt;Redirect/&gt;</code>标签，而是直接使用<code>JS</code>的语法实现重定向。他一般用在业务逻辑比较发杂的场合或者需要多次判断的场合。我们这里就不模拟复杂场景了，还是利用上边的例子实现一下，让大家看到结果就好。</p>
<p>比如直接在构造函数<code>constructor</code>中加入下面的重定向代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.props.history.push(&quot;/home/&quot;);  </span><br></pre></td></tr></table></figure>

<p>就可以顺利实现跳转，这样看起来和上面的过程是一样的。这两种方式的重定向你可以根据真实需求使用，这样能让你的程序更加的灵活。课后你可以试着模拟用户的登录过程试着用一下这样的跳转。</p>
<h1 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h1><p>后台管理系统， 大部分是用嵌套路由，来实现页面总体划分。</p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p><code>create-react-app demo2</code></p>
<p><code>npm isntall --save react-router-dom</code></p>
<h2 id="初始化基本目录"><a href="#初始化基本目录" class="headerlink" title="初始化基本目录"></a>初始化基本目录</h2><p>再src下建立page文件夹。 然后再page下创建video 和 workplace。 然后再src下建立Approuter.js 该文件是路由配置文件</p>
<h1 id="react-router-1"><a href="#react-router-1" class="headerlink" title="react-router"></a>react-router</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/vue/" class="post-title-link" itemprop="url">vue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-02-28 14:21:45 / Modified: 23:57:40" itemprop="dateCreated datePublished" datetime="2023-02-28T14:21:45+08:00">2023-02-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">web前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/02/28/ts/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="zhaowang">
      <meta itemprop="description" content="病了就要吃药">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旺旺小小酥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/28/ts/" class="post-title-link" itemprop="url">ts</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-02-28 14:21:33" itemprop="dateCreated datePublished" datetime="2023-02-28T14:21:33+08:00">2023-02-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zhaowang"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">zhaowang</p>
  <div class="site-description" itemprop="description">病了就要吃药</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/izhaowang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;izhaowang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:izhwang@126.com" title="E-Mail → mailto:izhwang@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhaowang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
